<div class="animated fadeIn">
    <div class="container-fluid">
        <div class="const_hd row">
            <div class="col-md-10">
                <!-- <div class="const_hd"> -->
                <button class="btn btn-primary btn-sm mr-2" (click)="goToSales()">
                    <i class="fa fa-arrow-left" aria-hidden="true"></i> &nbsp; Back
                </button> Deal : {{dealDetailsObj?.purchasers[0]?.first_name}} {{dealDetailsObj?.purchasers[0]?.last_name}} &nbsp;&nbsp; {{dealDetailsObj?.unit?.project_name}} {{dealDetailsObj?.unit?.unit_no}} {{dealDetailsObj?.unit?.model_name}}
                <!-- </div> -->
            </div>
            <div class="col-md-2 text-right mb-2">
                <button *ngIf="dealDetailsObj?.stage =='UNIT RELEASED'" class="btn btn-sm btn-danger mr-2" type="button" (click)="archiveDeal()">
                    <!-- <i class="fa fa-archive" aria-hidden="true"></i> -->Archive
                </button>
                <!-- <button class="btn btn-sm btn-danger" type="button" (click)="archiveDeal()">
                    <i class="fa fa-trash" aria-hidden="true"></i>
                </button> -->
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-body" style="overflow: auto;">
                        <div class="stage-container mb-2">
                            <div id="crumbs">
                                <ul>
                                    <ng-container *ngIf="dealDetailsObj?.stage">
                                        <li *ngFor="let item of dealStages">
                                            <a class="{{item?.value == dealDetailsObj?.stage ? 'active':''}}" [ngbTooltip]="tipContent" container="body" placement="auto">
                                                <ng-template #tipContent>
                                                    <div [innerHtml]="item.description"></div>
                                                </ng-template>
                                                {{item.value}}
                                            </a>
                                        </li>
                                    </ng-container>
                                </ul>
                            </div>
                        </div>
                        <!-- <ng-container *ngFor="let item of grantStages">
                                <p *ngIf="item.active">{{item.description}}<br><br>
                                </p>
                        </ng-container> -->
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-body" style="overflow: auto;">
                        <!-- *ngIf="!dealDetailsObj?.unit && (dealDetailsObj?.stage =='NEW' || dealDetailsObj?.stage =='UNIT RELEASED')" -->
                        <button class="btn btn-sm btn-primary mr-2 mb-2" type="button" (click)="openAssignUnitModal(assignUnitModal)">
                            Assign Unit
                        </button>
                        <!-- *ngIf="dealDetailsObj?.stage =='RESERVED' || dealDetailsObj?.stage =='OUT FOR SIGN' || dealDetailsObj?.stage =='SIGNED' || dealDetailsObj?.stage =='CONDITIONAL' || dealDetailsObj?.stage =='FIRM'" -->
                        <button class="btn btn-sm btn-primary mr-2 mb-2" type="button" (click)="openAssignBrokerModal(assignBrokerModal)">
                            Assign a Broker
                        </button>
                        <!-- *ngIf="dealDetailsObj?.stage =='RESERVED' || dealDetailsObj?.stage =='OUT FOR SIGN' || dealDetailsObj?.stage =='SIGNED' || dealDetailsObj?.stage =='CONDITIONAL' || dealDetailsObj?.stage =='FIRM'" -->
                        <button class="btn btn-sm btn-primary mr-2 mb-2" type="button" (click)="openAssigSalesAgentModal(assignSalesAgentModal)">
                            Assign Sales Agent
                        </button>
                        <!-- *ngIf="dealDetailsObj?.stage =='RESERVED' || dealDetailsObj?.stage =='OUT FOR SIGN' || dealDetailsObj?.stage =='SIGNED' || dealDetailsObj?.stage =='CONDITIONAL' || dealDetailsObj?.stage =='FIRM'" -->
                        <button (click)="openApplyDiscount(applyDiscount)" class="btn btn-sm btn-primary mr-2 mb-2" type="button">
                            Apply Incentives
                        </button>
                        <!-- *ngIf="dealDetailsObj?.stage =='RESERVED' || dealDetailsObj?.stage =='OUT FOR SIGN' || dealDetailsObj?.stage =='SIGNED' || dealDetailsObj?.stage =='CONDITIONAL'" -->
                        <button (click)="openApplyExtentionModal(applyExtention)" class="btn btn-sm btn-primary mr-2 mb-2" type="button">
                            Apply Extension
                        </button>
                        <!-- *ngIf="dealDetailsObj?.stage =='RESERVED'" -->
                        <button class="btn btn-sm btn-primary mr-2 mb-2" type="button" (click)="updateAgreementOut(agreementOutModal)">
                            Agreement Out for Sign
                        </button>
                        <!-- *ngIf="dealDetailsObj?.stage =='RESERVED' || dealDetailsObj?.stage =='OUT FOR SIGN'" -->
                        <button (click)="openAgreementSignedModal(agreementSigned)" class="btn btn-sm btn-primary mr-2 mb-2" type="button">
                            Agreement Signed
                        </button>
                        <!-- *ngIf="dealDetailsObj?.stage =='SIGNED'" -->
                        <button (click)="openExecuteAgreementModal(executeAgreement)" class="btn btn-sm btn-primary mr-2 mb-2" type="button">
                            Execute Agreement
                        </button>
                        <!-- *ngIf="dealDetailsObj?.stage =='CONDITIONAL'" -->
                        <button (click)="openFirmAgreementModal()" class="btn btn-sm btn-primary mr-2 mb-2" type="button">
                            Firm Agreement
                        </button>
                        <!-- *ngIf="dealDetailsObj?.stage =='CONDITIONAL' || dealDetailsObj?.stage =='SIGNED' || dealDetailsObj?.stage =='FIRM'" -->
                        <button (click)="openDefaultAgreementModal()" class="btn btn-sm btn-primary mr-2 mb-2" type="button">
                            Default Agreement
                        </button>
                        <button (click)="openWithdrawRecessionModal()" class="btn btn-sm btn-primary mr-2 mb-2" type="button">
                            Deal Withdraw - Recession
                        </button>
                        <!-- *ngIf="dealDetailsObj?.stage =='RESERVED' || dealDetailsObj?.stage =='OUT FOR SIGN' || dealDetailsObj?.stage =='SIGNED' || dealDetailsObj?.stage =='CONDITIONAL' || dealDetailsObj?.stage =='FIRM'" -->
                        <button class="btn btn-sm btn-primary mr-2 mb-2" type="button">
                            Generate Agreements
                        </button>
                        <!-- *ngIf="dealDetailsObj?.stage =='RESERVED' || dealDetailsObj?.stage =='OUT FOR SIGN' || dealDetailsObj?.stage =='SIGNED' || dealDetailsObj?.stage =='CONDITIONAL' || dealDetailsObj?.stage =='FIRM'" -->
                        <button class="btn btn-sm btn-primary mr-2 mb-2" type="button" (click)="openAddPurchaser(addPurchaserModal)">
                            Add Purchaser
                        </button>
                        <!-- *ngIf="!dealDetailsObj?.solicitor  && (dealDetailsObj?.stage =='RESERVED' || dealDetailsObj?.stage =='OUT FOR SIGN' || dealDetailsObj?.stage =='FIRM' || dealDetailsObj?.stage =='SIGNED' || dealDetailsObj?.stage =='CONDITIONAL')" -->
                        <button class="btn btn-sm btn-primary mr-2 mb-2" type="button" (click)="openAddSolicitor(addSolicitorModal)">
                            Add Solicitor
                        </button>
                        <!-- *ngIf="dealDetailsObj?.unit && (dealDetailsObj?.stage =='RESERVED' || dealDetailsObj?.stage =='OUT FOR SIGN'|| (dealDetailsObj?.stage !='NEW' && dealDetailsObj?.stage !='UNIT RELEASED' &&  dealDetailsObj?.stage !='SIGNED'))" -->
                        <button (click)="openReleaseDealUnit(confirmReleaseUnitModal)" class="btn btn-sm btn-primary mr-2 mb-2" type="button">
                            Release Unit
                        </button>
                        <!-- *ngIf="!dealDetailsObj?.third_party && (dealDetailsObj?.stage =='RESERVED' || dealDetailsObj?.stage =='OUT FOR SIGN' || dealDetailsObj?.stage =='SIGNED' || dealDetailsObj?.stage =='CONDITIONAL' || dealDetailsObj?.stage =='FIRM')" -->
                        <button class="btn btn-sm btn-primary mr-2 mb-2" (click)="openAddThirdParty(addThirdPartyModal)" type="button">
                            Third Party
                        </button>
                        <!-- <button class="btn btn-sm btn-primary mr-2 mb-2" type="button">
                            Set Conditions
                        </button> -->
                        <button class="btn btn-sm btn-primary mr-2 mb-2" type="button" (click)="openVerifyModal(salesVerifyModal)">
                            Sales Verify
                        </button>
                        <button class="btn btn-sm btn-primary mr-2 mb-2" type="button" (click)="openFinanceModal(financeVerifyModal)">
                            Finance Verify
                        </button>
                        <!-- *ngIf="(dealDetailsObj?.stage =='OUT FOR SIGN' || dealDetailsObj?.stage =='SIGNED' || dealDetailsObj?.stage =='RESERVED' || dealDetailsObj?.stage =='CONDITIONAL' || dealDetailsObj?.stage =='FIRM' || (dealDetailsObj?.stage !='NEW' && dealDetailsObj?.stage !='UNIT RELEASED'))" -->
                        <button class="btn btn-sm btn-primary mr-2 mb-2" type="button" (click)="openAllocateLocker(allocateLockerModal)">
                            Allocate Locker
                        </button>
                        <!-- *ngIf="( dealDetailsObj?.stage =='OUT FOR SIGN' || dealDetailsObj?.stage =='SIGNED' || dealDetailsObj?.stage =='RESERVED' || dealDetailsObj?.stage =='CONDITIONAL' || dealDetailsObj?.stage =='FIRM' || (dealDetailsObj?.stage !='NEW' && dealDetailsObj?.stage !='UNIT RELEASED'))" -->
                        <button class="btn btn-sm btn-primary mr-2 mb-2" type="button" (click)="openAllocateBicycle(allocateBicycleModal)">
                            Allocate Bicycle
                        </button>
                        <!-- *ngIf="(dealDetailsObj?.stage =='OUT FOR SIGN'|| dealDetailsObj?.stage =='SIGNED' || dealDetailsObj?.stage =='RESERVED'  || dealDetailsObj?.stage =='CONDITIONAL' || dealDetailsObj?.stage =='FIRM' || (dealDetailsObj?.stage !='NEW' && dealDetailsObj?.stage !='UNIT RELEASED'))" -->
                        <button class="btn btn-sm btn-primary mr-2 mb-2" type="button" (click)="openAllocateParking(allocateParkingModal)">
                            Allocate Parking
                        </button>
                        <button *ngIf="dealDetailsObj?.stage =='UNIT RELEASED'" class="btn btn-sm btn-danger mr-2 mb-2" type="button" (click)="deleteDeal()">
                            Delete
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="animated fadeIn">
            <div class="row">
                <div class="col-lg-12 col-xs-12">
                    <ngb-tabset (tabChange)="doTabFunctions($event)" [activeId]="defaultActiveTab">
                        <ngb-tab id="dealInfo" title="Deal Info">
                            <ng-template ngbTabContent>
                                <div class="content-wrap">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="card">
                                                <div class="card-body">
                                                    <div class="row">
                                                        <div class="col-md-4">
                                                            <dl class="row">
                                                                <dd class="col-md-5">Sales Checked </dd>
                                                                <dd class="col-md-7">: {{dealDetailsObj.sales_verified ? 'Yes' : 'No'}}</dd>
                                                                <dd class="col-md-5" *ngIf="dealDetailsObj.sales_verified">Sales verified on</dd>
                                                                <dd class="col-md-7" *ngIf="dealDetailsObj.sales_verified">: {{dealDetailsObj.sales_verified_on | date:'yyyy-MM-dd hh:mm a'}}</dd>
                                                                <dd class="col-md-5" *ngIf="dealDetailsObj.sales_verified">Sales verified by</dd>
                                                                <dd class="col-md-7" *ngIf="dealDetailsObj.sales_verified">: {{dealDetailsObj.sales_verified_by}}</dd>
                                                            </dl>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <dl class="row">
                                                                <dd class="col-md-5">Finance Checked</dd>
                                                                <dd class="col-md-7">: {{dealDetailsObj.finance_verified ? 'Yes' : 'No'}}</dd>
                                                                <dd class="col-md-5" *ngIf="dealDetailsObj.finance_verified">Finance verified on</dd>
                                                                <dd class="col-md-7" *ngIf="dealDetailsObj.finance_verified">: {{dealDetailsObj.finance_verified_on | date:'yyyy-MM-dd hh:mm a'}}</dd>
                                                                <dd class="col-md-5" *ngIf="dealDetailsObj.finance_verified">Finance verified by</dd>
                                                                <dd class="col-md-7" *ngIf="dealDetailsObj.finance_verified">: {{dealDetailsObj.finance_verified_by}}</dd>
                                                            </dl>
                                                        </div>
                                                        <div class="col md-4">
                                                            <dl class="row">
                                                                <dd class="col-md-5">Deal Type</dd>
                                                                <dd class="col-md-7">: {{dealDetailsObj.deal_type}}</dd>
                                                            </dl>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-12 col-xs-12 mt-2">
                                            <div class="project-details">
                                                <div class="row">
                                                    <div class="col-md-6 padding-right-2">
                                                        <div class="card  deal-card">
                                                            <div class="card-body">
                                                                <div class="row pt-2" [ngClass]="{'border-bottom':(i+1)!=dealDetailsObj?.purchasers.length}" *ngFor="let purchaser of dealDetailsObj?.purchasers;let i=index">
                                                                    <div class="col-md-12">
                                                                        <h4>Purchaser {{i+1}}
                                                                        </h4>
                                                                        <dl class="row mb-0">
                                                                            <dd class="col-md-12 link" (click)="navigateToContact(purchaser?._id)">{{purchaser?.last_name}}, {{purchaser?.first_name}}</dd>
                                                                        </dl>
                                                                        <dl class="row mb-0 pl-3">
                                                                            <dd *ngFor="let phone of purchaser?.phones;let i=index">
                                                                                <span *ngIf="i>0">,{{i}}</span>{{phone?.number}}&nbsp;
                                                                                <span *ngIf="(i+1)==purchaser?.phones.length">;&nbsp;</span>
                                                                            </dd>
                                                                            <dd *ngFor="let email of purchaser?.emails;let j=index">
                                                                                {{email?.email}}&nbsp;
                                                                                <span *ngIf="j>0">,</span>
                                                                            </dd>
                                                                        </dl>
                                                                    </div>
                                                                </div>
                                                                <div class="row" *ngIf="!dealDetailsObj?.purchasers || (dealDetailsObj?.purchasers && dealDetailsObj?.purchasers.length==0)">
                                                                    <div class="col-md-12 text-center">
                                                                        No Record Found
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 padding-left-1">
                                                        <div class="card deal-card">
                                                            <div class="card-body">
                                                                <div class="row">
                                                                    <div class="col-md-12">
                                                                        <h4>Project/Unit
                                                                            <!-- <button style="float: right;" class="btn btn-sm btn-primary" type="button" (click)="openEditWorksheetModal(basicContactDetails)">
                                                                                <i class="fas fa-pencil-alt" style="font-size:12px;"></i>
                                                                            </button> -->
                                                                        </h4>
                                                                        <dl class="row">
                                                                            <dd class="col-md-7">Project name</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.unit?.project_name}}</dd>
                                                                            <dd class="col-md-7">Builder</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.unit?.builder_name}}</dd>
                                                                            <dd class="col-md-7">Model </dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.unit?.model_name}}</dd>
                                                                            <dd class="col-md-7">Unit </dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.unit?.unit_no}}</dd>
                                                                            <dd class="col-md-7">Marketing Unit </dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.unit?.unit_no_marketing}}</dd>
                                                                            <dd class="col-md-7">Legal Floor </dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.unit?.floor_legal}}</dd>
                                                                            <dd class="col-md-7">Marketing Floor </dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.unit?.floor_marketing}}</dd>
                                                                            <dd class="col-md-7">Legal Unit</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.unit?.unit_no_legal}}</dd>
                                                                            <dd class="col-md-7">Collection</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.unit?.collection}}</dd>
                                                                            <dd class="col-md-7">Bathroom</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.unit?.bath}}</dd>
                                                                            <dd class="col-md-7">Bedroom</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.unit?.bed}}</dd>
                                                                            <dd class="col-md-7">Den</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.unit?.den}}</dd>
                                                                            <dd class="col-md-7">Media</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.unit?.media}}</dd>
                                                                            <dd class="col-md-7">Flex</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.unit?.flex}}</dd>
                                                                            <dd class="col-md-7">Area ({{measureUnits[0]?.area}})</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.unit?.area}}</dd>
                                                                            <dd class="col-md-7">Ceiling ({{measureUnits[0]?.length}})</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.unit?.ceiling}}</dd>
                                                                            <!-- <dd class="col-md-7">Lockers</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.unit ? dealDetailsObj?.unit?.is_locker_eligible?'Yes':'No'
                                                                                :'' }}
                                                                            </dd>
                                                                            <dd class="col-md-7">Parking</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.unit ? dealDetailsObj?.unit?.is_parking_eligible
                                                                                ? 'Yes':'No' :'' }}</dd>
                                                                            <dd class="col-md-7">Bicycle</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.unit ? dealDetailsObj?.unit?.is_bicycle_eligible
                                                                                ? 'Yes':'No': ''}}</dd> -->
                                                                            <dd class="col-md-7">Outdoor Type</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.unit?.outdoor_type}}</dd>
                                                                            <dd class="col-md-7">Outdoor Area ({{measureUnits[0]?.area}})</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.unit?.outdoor_area}}</dd>
                                                                            <dd class="col-md-7">View</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.unit?.views}}</dd>
                                                                            <!-- <dd class="col-md-7">Parking Details</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.unit?.max_parking}}</dd>
                                                                            <dd class="col-md-7">Locker Details</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.unit?.max_lockers}}</dd>
                                                                            <dd class="col-md-7">Bicycle Details</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.unit?.max_bicycle}}</dd> -->
                                                                            <dd class="col-md-7">Purchaser Type</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.unit?.type}}</dd>
                                                                            <dd class="col-md-7">Right To Lease</dd>
                                                                            <dd class="col-md-5">: </dd>
                                                                            <dd class="col-md-7">Free Assignment</dd>
                                                                            <dd class="col-md-5">: </dd>
                                                                            <dd class="col-md-7">Window Coverings</dd>
                                                                            <dd class="col-md-5">: </dd>
                                                                            <dd class="col-md-7">Deposit Change</dd>
                                                                            <dd class="col-md-5">: </dd>
                                                                            <dd class="col-md-7">Sale Source</dd>
                                                                            <dd class="col-md-5">: </dd>
                                                                            <dd class="col-md-7">Is waiting List Storage</dd>
                                                                            <dd class="col-md-5">: </dd>
                                                                            <dd class="col-md-7">Is waiting List Parking</dd>
                                                                            <dd class="col-md-5">: </dd>
                                                                        </dl>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 padding-right-2">
                                                        <div class="card deal-card">
                                                            <div class="card-body">
                                                                <div class="row">
                                                                    <div class="col-md-12">
                                                                        <h4>Finance</h4>
                                                                        <dl class="row">
                                                                            <dd class="col-md-7">Base Price</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.finance?.base_price ? (dealDetailsObj?.finance?.base_price | currency:'USD') : '$0.00'}}</dd>
                                                                            <dd class="col-md-7">Price / ({{measureUnits[0]?.area}}) </dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.finance?.price_sqft ? (dealDetailsObj?.finance?.price_sqft | currency:'USD') : '$0.00'}}</dd>
                                                                            <dd class="col-md-7">Floor Premium</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.finance?.floor_premium | currency:'USD'}}</dd>
                                                                            <dd class="col-md-7">Unit Premium</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.finance?.unit_premium | currency:'USD'}}</dd>
                                                                            <dd class="col-md-7">NET Price </dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.finance?.net_price ? (dealDetailsObj?.finance?.net_price | currency:'USD') :'$0.00' }}</dd>
                                                                            <dd class="col-md-7">Sale Price</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.finance?.sales_price ? (dealDetailsObj?.finance?.sales_price | currency:'USD') : '$0.00'}}</dd>
                                                                            <dd class="col-md-7">Total Discounts</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.finance?.total_discount ? (dealDetailsObj?.finance?.total_discount | currency:'USD') :'$0.00'}}</dd>
                                                                            <dd class="col-md-7">Contract Price</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.finance?.contract_price ? (dealDetailsObj?.finance?.contract_price | currency:'USD') :'$0.00'}}</dd>
                                                                            <dd class="col-md-7">Tax </dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.finance?.tax ? (dealDetailsObj?.finance?.tax | currency:'USD'):'$0.00' }}</dd>
                                                                            <!-- <dd class="col-md-7">Tax </dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.tax ? (dealDetailsObj?.tax
                                                                                | currency:'USD'):'$0.00' }}</dd> -->
                                                                            <dd class="col-md-7">Parking Price</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.finance?.parking_price | currency:'USD' }}
                                                                            </dd>
                                                                            <dd class="col-md-7">Locker Price</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.finance?.locker_price| currency:'USD'}}</dd>
                                                                            <dd class="col-md-7">Bicycle Price</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.finance?.bicycle_price | currency:'USD'}}</dd>
                                                                            <dd class="col-md-7">Total NSF Fee Paid</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.finance?.nsf_fee_paid | currency:'USD'}}</dd>
                                                                            <dd class="col-md-7">NSF Count</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.finance?.nsf_count}}</dd>
                                                                            <dd class="col-md-7">Total Penalty</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.finance?.total_penalty| currency:'USD'}}</dd>
                                                                        </dl>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 padding-left-1">
                                                        <div class="card deal-card">
                                                            <div class="card-body">
                                                                <div class="row">
                                                                    <div class="col-md-12">
                                                                        <h4>Discounts
                                                                            <!-- <button style="float: right;" class="btn btn-sm btn-primary" type="button" (click)="openEditWorksheetModal(basicContactDetails)">
                                                                                    <i class="fas fa-pencil-alt" style="font-size:12px;"></i>
                                                                                </button> -->
                                                                        </h4>
                                                                        <div class="row" *ngFor="let discount of dealDetailsObj?.discounts;let i=index">
                                                                            <div class="col-md-12">
                                                                                <h4>{{i+1}}. {{discount?.name}}
                                                                                    <!-- <button style="float: right;" class="btn btn-sm btn-primary" type="button" (click)="openEditBrokerModal(updateBrokerDetails,broker)">
                                                                                                <i class="fas fa-pencil-alt" style="font-size:12px;"></i>
                                                                                            </button> -->
                                                                                </h4>
                                                                                <dl class="row">
                                                                                    <dd class="col-md-5">Type of incentive</dd>
                                                                                    <dd class="col-md-7" *ngIf="discount.type_of_incentive=='MONETARY'">: Monetary Value as discounted price
                                                                                    </dd>
                                                                                    <dd class="col-md-7" *ngIf="discount.type_of_incentive=='DECORE-DOLLAR'">: Decore Dollar </dd>
                                                                                    <dd class="col-md-7" *ngIf="discount.type_of_incentive=='UPGRADE-PACKAGE-FREE'">: Specific upgrade package free</dd>
                                                                                    <dd class="col-md-5" *ngIf="discount.type_of_incentive=='UPGRADE-PACKAGE-FREE' && discount.package_name">Package Name </dd>
                                                                                    <dd class="col-md-7" *ngIf="discount.type_of_incentive=='UPGRADE-PACKAGE-FREE' && discount.package_name">: {{discount?.package_name}}</dd>
                                                                                    <ng-container>
                                                                                        <dd class="col-md-5">Amount Type</dd>
                                                                                        <dd class="col-md-7">: {{discount?.amount_type =='AMOUNT' ? 'Fixed Amount' : 'Percentage of Unit Sale Price'}}</dd>
                                                                                        <dd class="col-md-5" *ngIf="discount?.amount_type =='PERCENT'">Percent</dd>
                                                                                        <dd class="col-md-7" *ngIf="discount?.amount_type =='PERCENT'">: {{discount?.percent? discount?.percent+'%':'' }} </dd>
                                                                                        <dd class="col-md-5" *ngIf="discount?.amount_type =='PERCENT'">Amount</dd>
                                                                                        <dd class="col-md-7" *ngIf="discount?.amount_type =='PERCENT'">: {{discount?.amount? (discount?.amount | currency:'USD' ):'' }} </dd>
                                                                                        <dd class="col-md-5" *ngIf="discount?.amount_type =='AMOUNT'">Amount </dd>
                                                                                        <dd class="col-md-7" *ngIf="discount?.amount_type =='AMOUNT'">: {{discount?.amount? (discount?.amount | currency:'USD' ):'' }}</dd>
                                                                                        <dd class="col-md-5">Comment</dd>
                                                                                        <dd class="col-md-7">: {{discount?.comment}}</dd>
                                                                                    </ng-container>
                                                                                </dl>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 padding-right-2">
                                                        <div class="card deal-card">
                                                            <div class="card-body">
                                                                <div class="row">
                                                                    <div class="col-md-12">
                                                                        <h4>Dates
                                                                            <button style="float: right;" class="btn btn-sm btn-primary" type="button" (click)="openEditDatesModal(datesDetailsModal)">
                                                                                <i class="fas fa-pencil-alt" style="font-size:12px;"></i>
                                                                            </button>
                                                                        </h4>
                                                                        <dl class="row">
                                                                            <dd class="col-md-5">Initiated On</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.initiated_on | date:'yyyy-MM-dd hh:mm a'}}</dd>
                                                                            <dd class="col-md-5" *ngIf="dealDetailsObj?.out_for_sign_date">Agreement Out for Sign </dd>
                                                                            <dd class="col-md-7" *ngIf="dealDetailsObj?.out_for_sign_date">: {{dealDetailsObj?.out_for_sign_date | date:'yyyy-MM-dd'}}</dd>
                                                                            <dd class="col-md-5">Signed On</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.signed_date | date:'yyyy-MM-dd'}}</dd>
                                                                            <dd class="col-md-5">Executed On </dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.executed_date | date:'yyyy-MM-dd'}}</dd>
                                                                            <dd class="col-md-5">Acknowledgement Date</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.acknowledgement_date | date:'yyyy-MM-dd'}}</dd>
                                                                            <dd class="col-md-5">Firm On</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.firm_date | date:'yyyy-MM-dd'}}</dd>
                                                                            <dd class="col-md-5">Extension Days</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.extension_days}}</dd>
                                                                            <dd class="col-md-5">Cooling Extended Period</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.cooling_period_extended}}</dd>
                                                                            <!-- <dd class="col-md-5">Distribution On</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.distribution_date | date:'yyyy-MM-dd'}}</dd>
                                                                            <dd class="col-md-5">Expected Completion On</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.expected_completion_date
                                                                                | date:'yyyy-MM-dd'}}</dd>
                                                                            <dd class="col-md-5">Actual Completion On</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.actual_completion_date |
                                                                                date:'yyyy-MM-dd'}}
                                                                            </dd>
                                                                            <dd class="col-md-5">Closing</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.closing_date | date:'yyyy-MM-dd'}}</dd> -->
                                                                        </dl>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 padding-left-1">
                                                        <div class="card deal-card">
                                                            <div class="card-body">
                                                                <div class="row">
                                                                    <div class="col-md-12">
                                                                        <h4>Extras
                                                                            <!-- <button style="float: right;" class="btn btn-sm btn-primary" type="button" (click)="openEditWorksheetModal(basicContactDetails)">
                                                                                <i class="fas fa-pencil-alt" style="font-size:12px;"></i>
                                                                            </button> -->
                                                                        </h4>
                                                                        <table *ngIf="dealDetailsObj" class="table table-striped table-bordered table-sm list_table" style="margin: 0 auto;">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>Type</th>
                                                                                    <th>Allocated</th>
                                                                                    <th>Price</th>
                                                                                    <th>Assigned</th>
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                <tr>
                                                                                    <td colspan="4" class="text-center"> Parking </td>
                                                                                </tr>
                                                                                <tr *ngFor="let item of dealDetailsObj?.allocate_parking;let i = index;">
                                                                                    <td>{{item?.type}}</td>
                                                                                    <td>{{item?.eligible_no}}</td>
                                                                                    <td class="text-right">{{item?.price ? (item?.price | currency: 'USD') :''}}</td>
                                                                                    <td>
                                                                                        <div *ngFor="let parking of item?.assignedCount">{{parking?.number}}({{parking?.floor_name}})</div>
                                                                                    </td>
                                                                                </tr>
                                                                                <tr *ngIf="!dealDetailsObj?.allocate_parking || dealDetailsObj?.allocate_parking.length==0">
                                                                                    <td colspan="4" class="text-center"> No parking found </td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <td colspan="4" class="text-center">Bicycle</td>
                                                                                </tr>
                                                                                <tr *ngFor="let item of dealDetailsObj?.allocate_bicycle;let i = index;">
                                                                                    <td>{{item?.type}}</td>
                                                                                    <td>{{item?.eligible_no}}</td>
                                                                                    <td class="text-right">{{item?.price ? (item?.price | currency: 'USD') :''}}</td>
                                                                                    <td>
                                                                                        <div *ngFor="let parking of item?.assignedCount">{{parking?.number}}({{parking?.floor_name}})</div>
                                                                                    </td>
                                                                                </tr>
                                                                                <tr *ngIf="!dealDetailsObj?.allocate_bicycle || dealDetailsObj?.allocate_bicycle.length==0">
                                                                                    <td colspan="4" class="text-center"> No bicycle found </td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <tr>
                                                                                        <td colspan="4" class="text-center">Locker</td>
                                                                                    </tr>
                                                                                    <tr *ngFor="let item of dealDetailsObj?.allocate_locker;let i = index;">
                                                                                        <td>{{item?.type}}</td>
                                                                                        <td>{{item?.eligible_no}}</td>
                                                                                        <td class="text-right">{{item?.price ? (item?.price | currency: 'USD') :''}}</td>
                                                                                        <td>
                                                                                            <div *ngFor="let parking of item?.assignedCount">{{parking?.number}}({{parking?.floor_name}})</div>
                                                                                        </td>
                                                                                    </tr>
                                                                                    <tr *ngIf="!dealDetailsObj?.allocate_locker || dealDetailsObj?.allocate_locker.length==0">
                                                                                        <td colspan="4" class="text-center"> No locker found </td>
                                                                                    </tr>
                                                                                    <tr>
                                                                            </tbody>
                                                                        </table>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 padding-right-2">
                                                        <div class="card deal-card">
                                                            <div class="card-body">
                                                                <div class="row">
                                                                    <div class="col-md-12">
                                                                        <h4>Solicitor
                                                                            <button style="float: right;" *ngIf="dealDetailsObj?.solicitor && dealDetailsObj?.solicitor?._id" class="btn btn-sm btn-primary" type="button" (click)="openEditSolicitorModal(updateSolicitorDetails,dealDetailsObj?.solicitor)">
                                                                                <i class="fas fa-pencil-alt" style="font-size:12px;"></i>
                                                                            </button>
                                                                        </h4>
                                                                        <dl class="row mb-0">
                                                                            <dd class="col-md-5">Prefix</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.solicitor?.prefix}}</dd>
                                                                            <dd class="col-md-5">First name</dd>
                                                                            <dd class="col-md-7 link" (click)="navigateToContact(dealDetailsObj?.solicitor?._id)">: {{dealDetailsObj?.solicitor?.first_name}}</dd>
                                                                            <dd class="col-md-5">Middle Name :</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.solicitor?.middle_name}}</dd>
                                                                            <dd class="col-md-5">Last name</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.solicitor?.last_name}}</dd>
                                                                            <dd class="col-md-5">Suffix</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.solicitor?.suffix}}</dd>
                                                                            <dd class="col-md-5">Display name</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.solicitor?.display_name}}</dd>
                                                                            <dd class="col-md-5">Salutation</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.solicitor?.salutation}}</dd>
                                                                            <dd class="col-md-5">Family Salutation:</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.solicitor?.family_salutation}}</dd>
                                                                            <dd class="col-md-5">Street 1</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.solicitor?.addresses?.street1}}</dd>
                                                                            <dd class="col-md-5">Street 2</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.solicitor?.addresses?.street12}}</dd>
                                                                            <dd class="col-md-5">City</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.solicitor?.addresses?.city}}</dd>
                                                                            <dd class="col-md-5">State</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.solicitor?.addresses?.state}}</dd>
                                                                            <dd class="col-md-5">Zip</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.solicitor?.addresses?.zip}}</dd>
                                                                            <dd class="col-md-5">Fax</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.solicitor?.fax}}</dd>
                                                                        </dl>
                                                                        <dl class="row mb-0" *ngFor="let phone of dealDetailsObj?.solicitor?.phones">
                                                                            <dd class="col-md-5">{{phone?.type}}</dd>
                                                                            <dd class="col-md-6">: {{phone?.number}}</dd>
                                                                        </dl>
                                                                        <dl class="row mb-0" *ngFor="let email of dealDetailsObj?.solicitor?.emails">
                                                                            <dd class="col-md-5">{{email?.type}}</dd>
                                                                            <dd class="col-md-6">: {{email?.email}}</dd>
                                                                        </dl>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 padding-left-1">
                                                        <div class="card deal-card">
                                                            <div class="card-body">
                                                                <div class="row">
                                                                    <div class="col-md-12">
                                                                        <h4>Service - Tarion
                                                                            <button style="float: right;" class="btn btn-sm btn-primary" type="button" (click)="openEditConstructionModal(updateConstructionDetails)">
                                                                                <i class="fas fa-pencil-alt" style="font-size:12px;"></i>
                                                                            </button>
                                                                        </h4>
                                                                        <dl class="row">
                                                                            <ng-container *ngFor="let date of occupancyList; let j=index">
                                                                                <dd class="col-md-7">{{date?.label}}</dd>
                                                                                <dd class="col-md-5">:
                                                                                    <ng-container *ngIf="dealDetailsObj?.occupancy_dates">{{dealDetailsObj?.occupancy_dates[date.id] ? (dealDetailsObj?.occupancy_dates[date.id] | date:'yyyy-MM-dd') :''}}
                                                                                    </ng-container>
                                                                                    <ng-container *ngIf="!dealDetailsObj?.occupancy_dates">
                                                                                    </ng-container>
                                                                                </dd>
                                                                            </ng-container>
                                                                            <!-- <dd class="col-md-7">First Tentative Occupancy</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.construction?.first_tentative_occupancy}}</dd>
                                                                            <dd class="col-md-7">Outside Occupancy </dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.construction?.outside_occupancy}}</dd> -->
                                                                            <dd class="col-md-7">Notice Period for Occupancy Delay </dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.construction?.notice_period_occupancy_delay}}</dd>
                                                                            <dd class="col-md-7">Purchasers Termination Period </dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.construction?.purchaser_termination_period}}</dd>
                                                                            <dd class="col-md-7">Zoning Approval</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.construction?.zoning_approval}}</dd>
                                                                            <dd class="col-md-7">Commencement of Construction has occurred</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.construction?.commencement_construction_occurred}}</dd>
                                                                            <dd class="col-md-7">Commencement expected to Occur by</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.construction?.commencement_expected_occur_by}}</dd>
                                                                            <dd class="col-md-7">Early Termination Condition #1</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.construction?.early_termination_condition_1}}</dd>
                                                                            <dd class="col-md-7">Early Termination Condition #2</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.construction?.early_termination_condition_2}}</dd>
                                                                            <dd class="col-md-7">Early Termination Condition #3</dd>
                                                                            <dd class="col-md-5">: {{dealDetailsObj?.construction?.early_termination_condition_3}}</dd>
                                                                        </dl>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 padding-right-2">
                                                        <div class="card deal-card">
                                                            <div class="card-body">
                                                                <div class="row">
                                                                    <div class="col-md-12">
                                                                        <h4>Worksheet
                                                                            <!-- <button style="float: right;" class="btn btn-sm btn-primary" type="button" (click)="openEditWorksheetModal(basicContactDetails)">
                                                                                <i class="fas fa-pencil-alt" style="font-size:12px;"></i>
                                                                            </button> -->
                                                                        </h4>
                                                                        <div>
                                                                            <dl class="row" *ngIf="worksheetDetailsObj?.purchasers">
                                                                                <dd class="col-md-12">
                                                                                    <div class="link" (click)="navigateToWorksheet(worksheetDetailsObj?._id)">
                                                                                        {{worksheetDetailsObj?.purchasers[0]?.first_name}} {{worksheetDetailsObj?.purchasers[0]?.last_name}}
                                                                                    </div>
                                                                                    <div>
                                                                                        {{worksheetDetailsObj?.purchasers[0]?.mobile?.number}}; {{worksheetDetailsObj?.purchasers[0]?.email}}
                                                                                    </div>
                                                                                </dd>
                                                                            </dl>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 padding-left-1">
                                                        <div class="card deal-card">
                                                            <div class="card-body">
                                                                <div class="row">
                                                                    <div class="col-md-12">
                                                                        <h4>Third Party
                                                                            <button style="float: right;" *ngIf="dealDetailsObj?.third_party" class="btn btn-sm btn-primary" type="button" (click)="openEditThirdPartyModal(updateThirdPartyDetails)">
                                                                                <i class="fas fa-pencil-alt" style="font-size:12px;"></i>
                                                                            </button>
                                                                        </h4>
                                                                        <dl class="row mb-0">
                                                                            <dd class="col-md-5">First name</dd>
                                                                            <dd class="col-md-7 link" (click)="navigateToContact(dealDetailsObj?.third_party?._id)">: {{dealDetailsObj?.third_party?.first_name}}</dd>
                                                                            <dd class="col-md-5">Middle Name :</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.third_party?.middle_name}}</dd>
                                                                            <dd class="col-md-5">Last name</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.third_party?.last_name}}</dd>
                                                                            <dd class="col-md-5">Display name</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.third_party?.display_name}}</dd>
                                                                        </dl>
                                                                        <dl class="row mb-0" *ngFor="let phone of dealDetailsObj?.third_party?.phones">
                                                                            <dd class="col-md-5">{{phone?.type}}</dd>
                                                                            <dd class="col-md-6">: {{phone?.number}}</dd>
                                                                        </dl>
                                                                        <dl class="row mb-0" *ngFor="let email of dealDetailsObj?.third_party?.emails">
                                                                            <dd class="col-md-5">{{email?.type}}</dd>
                                                                            <dd class="col-md-6">: {{email?.email}}</dd>
                                                                        </dl>
                                                                        <dl class="row mb-0">
                                                                            <dd class="col-md-5">Street 1</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.third_party?.addresses?.street1}}</dd>
                                                                            <dd class="col-md-5">Street 2</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.third_party?.addresses?.street12}}</dd>
                                                                            <dd class="col-md-5">City</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.third_party?.addresses?.city}}</dd>
                                                                            <dd class="col-md-5">State</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.third_party?.addresses?.state}}</dd>
                                                                            <dd class="col-md-5">Zip</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.third_party?.addresses?.zip}}</dd>
                                                                            <dd class="col-md-5">Fax</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.third_party?.fax}}</dd>
                                                                            <dd class="col-md-5">
                                                                                Nature of Principal Business or Occupation or POA.
                                                                            </dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.third_party?.poa}}</dd>
                                                                        </dl>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 padding-right-2">
                                                        <div class="card deal-card">
                                                            <div class="card-body">
                                                                <div class="row">
                                                                    <div class="col-md-12">
                                                                        <h4>Legal Information
                                                                            <!-- <button style="float: right;" class="btn btn-sm btn-primary" type="button" (click)="openEditWorksheetModal(basicContactDetails)">
                                                                                <i class="fas fa-pencil-alt" style="font-size:12px;"></i>
                                                                            </button> -->
                                                                        </h4>
                                                                        <dl class="row">
                                                                            <dd class="col-md-5">Names to put in contract</dd>
                                                                            <dd class="col-md-7"></dd>
                                                                            <dd class="col-md-5">Non standard amendments</dd>
                                                                            <dd class="col-md-7"></dd>
                                                                        </dl>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 padding-left-1">
                                                        <div class="card deal-card">
                                                            <div class="card-body">
                                                                <div class="row">
                                                                    <div class="col-md-12">
                                                                        <h4>Notes
                                                                            <button style="float: right; " class="btn btn-sm btn-primary doc-img-up-btn" type="button " (click)="openAddNotesModal(noteModal)">
                                                                                Add
                                                                            </button>
                                                                        </h4>
                                                                        <table class="table table-sm table-borderless" style="table-layout: fixed;">
                                                                            <thead></thead>
                                                                            <tbody *ngIf="noteList.length>0">
                                                                                <ng-container *ngFor="let item of noteList">
                                                                                    <tr>
                                                                                        <td style="text-align: left;" [innerHtml]="item?.body" colspan="2">
                                                                                        </td>
                                                                                        <td class="text-right" style="width:90px">
                                                                                            <button class="btn btn-sm btn-primary mr-2" type="button" (click)="editNotesModal(noteModal ,item)">
                                                                                                <i class="fa fa-pencil-alt" aria-hidden="true"></i>
                                                                                            </button>
                                                                                            <button class="btn btn-sm btn-danger" type="button" (click)="deleteNote(item)">
                                                                                                <i class="fa fa-trash" aria-hidden="true"></i>
                                                                                            </button>
                                                                                        </td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td class="text-left no-td-top-boder" colspan="2">
                                                                                            By {{item?.created_by}}&nbsp;&nbsp; On {{item?._created | date:'mediumDate'}} {{item?._created | date:'shortTime'}}
                                                                                        </td>
                                                                                    </tr>
                                                                                </ng-container>
                                                                            </tbody>
                                                                            <tbody *ngIf="noteList.length==0">
                                                                                <tr>
                                                                                    <td class="text-center" colspan="2"> No note found</td>
                                                                                </tr>
                                                                            </tbody>
                                                                        </table>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 padding-right-2">
                                                        <div class="card deal-card">
                                                            <div class="card-body">
                                                                <div class="row">
                                                                    <div class="col-md-12">
                                                                        <h4>Conditional Deal
                                                                            <!-- <button style="float: right;" class="btn btn-sm btn-primary" type="button" (click)="openEditWorksheetModal(basicContactDetails)">
                                                                                <i class="fas fa-pencil-alt" style="font-size:12px;"></i>
                                                                            </button> -->
                                                                        </h4>
                                                                        <dl class="row">
                                                                            <dd class="col-md-5">Conditions Removed</dd>
                                                                            <dd class="col-md-7"></dd>
                                                                            <dd class="col-md-5">Conditions Removed on(DATE)</dd>
                                                                            <dd class="col-md-7"></dd>
                                                                            <dd class="col-md-5">Conditions</dd>
                                                                            <dd class="col-md-7"></dd>
                                                                        </dl>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 padding-left-1">
                                                        <div class="card deal-card">
                                                            <div class="card-body">
                                                                <div class="row">
                                                                    <div class="col-md-12">
                                                                        <h4>Documents
                                                                            <button style="float: right;" class="btn btn-sm btn-primary doc-img-up-btn" type="button">
                                                                                Upload
                                                                                <input class="doc-img-upload" accept="image/*,.pdf,.doc,.docx" type="file" (change)="uploadDocument($event.target.files)">
                                                                            </button>
                                                                        </h4>
                                                                        <div>
                                                                            <div class="table-responsive ng-tns-c2-3 ng-star-inserted mt-2">
                                                                                <table class="table table-sm table-borderless" style="table-layout: fixed;">
                                                                                    <thead>
                                                                                        <tr>
                                                                                            <th style="text-align: left;" width="40px"></th>
                                                                                            <th style="text-align: left;" width="200px">Name</th>
                                                                                            <th style="text-align: left;" width="120px">Size</th>
                                                                                            <th width="200px"></th>
                                                                                        </tr>
                                                                                    </thead>
                                                                                    <tbody>
                                                                                        <ng-container *ngIf="documentsList.length>0">
                                                                                            <tr *ngFor="let item of documentsList">
                                                                                                <td style="text-align: left;" [ngSwitch]="item.file_type">
                                                                                                    <span style="padding:0 5px;font-size: large" *ngSwitchCase="'pdf'">
                                                                                                        <i class="far fa-file-pdf"></i>
                                                                                                    </span>
                                                                                                    <span style="padding:0 5px;font-size: large" *ngSwitchCase="'doc'">
                                                                                                        <i class="far fa-file-word"></i>
                                                                                                    </span>
                                                                                                    <span style="padding:0 5px;font-size: large" *ngSwitchCase="'docx'">
                                                                                                        <i class="far fa-file-word"></i>
                                                                                                    </span>
                                                                                                    <span style="padding:0 5px;font-size: large" *ngSwitchCase="'jpg'">
                                                                                                        <i class="far fa-file-image"></i>
                                                                                                    </span>
                                                                                                    <span style="padding:0 5px;font-size: large" *ngSwitchCase="'jpeg'">
                                                                                                        <i class="far fa-file-image"></i>
                                                                                                    </span>
                                                                                                    <span style="padding:0 5px;font-size: large" *ngSwitchCase="'png'">
                                                                                                        <i class="far fa-file-image"></i>
                                                                                                    </span>
                                                                                                    <span style="padding:0 5px;font-size: large" *ngSwitchCase="'xlsx'">
                                                                                                        <i class="far fa-file-excel"></i>
                                                                                                    </span>
                                                                                                    <span style="padding:0 5px;font-size: large" *ngSwitchCase="'pptx'">
                                                                                                        <i class="far fa-file-powerpoint"></i>
                                                                                                    </span>
                                                                                                    <span style="padding:0 5px;font-size: large" *ngSwitchDefault>
                                                                                                        <i class="fa fa-file"></i>
                                                                                                    </span>
                                                                                                </td>
                                                                                                <td style="text-align: left;">
                                                                                                    {{item?.name}}
                                                                                                </td>
                                                                                                <td style="text-align: left;"> {{item?.filesize}}</td>
                                                                                                <td class="text-right">
                                                                                                    <button class="btn btn-sm btn-primary mr-2" ngbTooltip="Rename" type="button" (click)="openRenameDocumentModal(openRenameDocument,item)">
                                                                                                        <i class="fas fa-pencil-alt" aria-hidden="true"></i>
                                                                                                    </button>
                                                                                                    <button class="btn btn-sm btn-primary mr-2" ngbTooltip="View" type="button" (click)="openDocumentModal(openViewDocument,item)">
                                                                                                        <i class="fas fa-eye" aria-hidden="true"></i>
                                                                                                    </button>

                                                                                                    <button class="btn btn-sm btn-primary mr-2" ngbTooltip="Download" type="button" (click)="downloadDealDocument(item)">
                                                                                                        <i class="fa fa-download" aria-hidden="true"></i>
                                                                                                    </button>

                                                                                                    <button class="btn btn-sm btn-danger mr-2" ngbTooltip="Remove" type="button" (click)="deleteDocument(item)">
                                                                                                        <i class="fa fa-trash" aria-hidden="true"></i>
                                                                                                    </button>
                                                                                                </td>
                                                                                            </tr>
                                                                                        </ng-container>
                                                                                        <ng-container *ngIf="documentsList.length==0">
                                                                                            <tr>
                                                                                                <td class="text-center" colspan="5"> No document found</td>
                                                                                            </tr>
                                                                                        </ng-container>
                                                                                    </tbody>
                                                                                </table>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 padding-right-2">
                                                        <div class="card deal-card">
                                                            <div class="card-body">
                                                                <div class="row">
                                                                    <div class="col-md-12">
                                                                        <h4>Corporation
                                                                            <!-- <button style="float: right;" class="btn btn-sm btn-primary" type="button" (click)="openEditWorksheetModal(basicContactDetails)">
                                                                                <i class="fas fa-pencil-alt" style="font-size:12px;"></i>
                                                                            </button> -->
                                                                        </h4>
                                                                        <dl class="row">
                                                                            <dd class="col-md-5"> Name</dd>
                                                                            <dd class="col-md-7"></dd>
                                                                            <dd class="col-md-5"> Nature of Business</dd>
                                                                            <dd class="col-md-7"></dd>
                                                                            <dd class="col-md-5"> Director Names</dd>
                                                                            <dd class="col-md-7"></dd>
                                                                            <dd class="col-md-5"> Verified</dd>
                                                                            <dd class="col-md-7"></dd>
                                                                            <dd class="col-md-5"> Verified Source</dd>
                                                                            <dd class="col-md-7"></dd>
                                                                            <dd class="col-md-5"> Registration no</dd>
                                                                            <dd class="col-md-7"></dd>
                                                                            <dd class="col-md-5"> Form Received</dd>
                                                                            <dd class="col-md-7"></dd>
                                                                        </dl>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 padding-left-1">
                                                        <div class="card deal-card">
                                                            <div class="card-body">
                                                                <div class="row" *ngIf="(dealDetailsObj?.brokers && dealDetailsObj?.brokers.length==0) || !dealDetailsObj?.brokers">
                                                                    <div class="col-md-12">
                                                                        <h4>Outside Broker / Agent</h4>
                                                                    </div>
                                                                </div>
                                                                <div class="row" *ngFor="let broker of dealDetailsObj?.brokers;let i=index">
                                                                    <div class="col-md-12">
                                                                        <h4>Outside Broker / Agent {{i+1}}
                                                                            <button style="float: right;" class="btn btn-sm btn-primary" type="button" (click)="openEditBrokerModal(updateBrokerDetails,broker)">
                                                                                <i class="fas fa-pencil-alt" style="font-size:12px;"></i>
                                                                            </button>
                                                                        </h4>
                                                                        <dl class="row">
                                                                            <dd class="col-md-5">Broker name</dd>
                                                                            <dd class="col-md-7 link" (click)="navigateToContact(broker.broker_id)">: {{broker?.broker_name}}
                                                                            </dd>
                                                                            <dd class="col-md-5">Broker Id</dd>
                                                                            <dd class="col-md-7">: {{broker?.broker_id}}</dd>
                                                                            <dd class="col-md-5">Email Address</dd>
                                                                            <dd class="col-md-7">: {{broker?.email}}</dd>
                                                                            <dd class="col-md-5">Phone </dd>
                                                                            <dd class="col-md-7">: {{broker?.phone}}</dd>
                                                                        </dl>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 padding-right-2">
                                                        <div class="card deal-card">
                                                            <div class="card-body">
                                                                <div class="row" *ngIf="(dealDetailsObj?.sales_agents && dealDetailsObj?.sales_agents.length==0) || !dealDetailsObj?.sales_agents">
                                                                    <div class="col-md-12">
                                                                        <h4>Sales Agent</h4>
                                                                    </div>
                                                                </div>
                                                                <div class="row" *ngFor="let agent of dealDetailsObj?.sales_agents;let i=index">
                                                                    <div class="col-md-12">
                                                                        <h4>Sales Agent {{i+1}}
                                                                            <button style="float: right;" class="btn btn-sm btn-primary" type="button" (click)="openEditSalesAgentModal(updateSalesAgentDetails,agent)">
                                                                                <i class="fas fa-pencil-alt" style="font-size:12px;"></i>
                                                                            </button>
                                                                        </h4>
                                                                        <dl class="row">
                                                                            <dd class="col-md-5 ">Sales Agent name</dd>
                                                                            <dd class="col-md-7 link" (click)="navigateToContact(agent?.sales_agent_id)">: {{agent?.sales_agent_name}}</dd>
                                                                            <dd class="col-md-5">Sales Agent Id</dd>
                                                                            <dd class="col-md-7">: {{agent?.sales_agent_id}}</dd>
                                                                            <dd class="col-md-5">Email Address</dd>
                                                                            <dd class="col-md-7">: {{agent?.email}}</dd>
                                                                            <dd class="col-md-5">Phone </dd>
                                                                            <dd class="col-md-7">: {{agent?.phone}}</dd>
                                                                        </dl>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 padding-left-1">
                                                        <div class="card deal-card">
                                                            <div class="card-body ">
                                                                <div class="row">
                                                                    <div class="col-md-12">
                                                                        <h4>Mortgage
                                                                            <button style="float: right;" class="btn btn-sm btn-primary" type="button" (click)="openEditUpdateMortgageModal(updateMortgage)">
                                                                                <i class="fas fa-pencil-alt" style="font-size:12px;"></i>
                                                                            </button>
                                                                        </h4>
                                                                        <dl class="row">
                                                                            <dd class="col-md-5">Required</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.mortgage?.required ? 'Yes' :'No'}}
                                                                            </dd>
                                                                            <dd class="col-md-5">Required Amount</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.mortgage?.approval_amount}}</dd>
                                                                            <dd class="col-md-5">Required Date</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.mortgage?.required_by_date}}</dd>
                                                                            <dd class="col-md-5">Approval Amount</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.mortgage?.approval_amount}}</dd>
                                                                            <dd class="col-md-5">Lender</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.mortgage?.lender}}</dd>
                                                                            <dd class="col-md-5">Coverage Percent</dd>
                                                                            <dd class="col-md-7">: {{dealDetailsObj?.mortgage?.coverage_percent}}</dd>
                                                                        </dl>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </ng-template>
                        </ngb-tab>
                        <ngb-tab id="purchaser" title="Purchaser(s)">
                            <ng-template ngbTabContent>
                                <div class="pt-2">
                                    <div class="row">
                                        <div [class]="((i%2)==0) ? 'col-md-6 mb-2 padding-right-2' : 'col-md-6 mb-2 padding-left-1'" *ngFor="let purchaser of dealDetailsObj?.purchasers;let i=index">
                                            <div class="card">
                                                <div class="card-body">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <h4>Purchaser {{i+1}}
                                                                <button style="float: right;" class="btn btn-sm btn-primary" type="button" (click)="openEditPurchaserDetailsModal(editPurchaserDetailsModal,purchaser,i)">
                                                                    <i class="fas fa-pencil-alt" style="font-size:12px;"></i>
                                                                </button>
                                                                <button *ngIf="dealDetailsObj?.purchasers.length>1" style="float: right;" class="btn btn-sm btn-danger mr-2" type="button" (click)="deletePurchaser(purchaser,i)">
                                                                    <i class="fa fa-trash"></i>
                                                                </button>
                                                            </h4>
                                                            <dl class="row mb-0">
                                                                <dd class="col-md-5">First name</dd>
                                                                <dd class="col-md-7 link" (click)="navigateToContact(purchaser?._id)">: {{purchaser?.first_name}}</dd>
                                                                <dd class="col-md-5">Middle Name :</dd>
                                                                <dd class="col-md-7">: {{purchaser?.middle_name}}</dd>
                                                                <dd class="col-md-5">Last name</dd>
                                                                <dd class="col-md-7">: {{purchaser?.last_name}}</dd>
                                                                <dd class="col-md-5">Legal name</dd>
                                                                <dd class="col-md-7">: {{purchaser?.display_name}}</dd>
                                                                <dd class="col-md-5">DOB</dd>
                                                                <dd class="col-md-7">: {{purchaser?.dob}}</dd>
                                                                <dd class="col-md-5">Street 1</dd>
                                                                <dd class="col-md-7">: {{purchaser?.addresses?.street1}}</dd>
                                                                <dd class="col-md-5">Street 2</dd>
                                                                <dd class="col-md-7">: {{purchaser?.addresses?.street12}}</dd>
                                                                <dd class="col-md-5">City</dd>
                                                                <dd class="col-md-7">: {{purchaser?.addresses?.city}}</dd>
                                                                <dd class="col-md-5">State</dd>
                                                                <dd class="col-md-7">: {{purchaser?.addresses?.state}}</dd>
                                                                <dd class="col-md-5">Zip</dd>
                                                                <dd class="col-md-7">: {{purchaser?.addresses?.zip}}</dd>
                                                                <dd class="col-md-5">Sin</dd>
                                                                <dd class="col-md-7">: {{purchaser?.sin}}</dd>
                                                                <dd class="col-md-5">Profession</dd>
                                                                <dd class="col-md-7">: {{purchaser?.profession}}</dd>
                                                                <dd class="col-md-5">Client Risk</dd>
                                                                <dd class="col-md-7">: {{purchaser?.client_risk}}</dd>
                                                                <dd class="col-md-5">Fintract</dd>
                                                                <dd class="col-md-7">: {{purchaser?.fintract}}</dd>
                                                            </dl>
                                                            <dl class="row mb-0" *ngFor="let phone of purchaser?.phones">
                                                                <dd class="col-md-5">{{phone?.type}}</dd>
                                                                <dd class="col-md-6">: {{phone?.number}}</dd>
                                                            </dl>
                                                            <dl class="row mb-0" *ngFor="let email of purchaser?.emails">
                                                                <dd class="col-md-5">{{email?.type}}</dd>
                                                                <dd class="col-md-7">: {{email?.email}}</dd>
                                                            </dl>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-6">
                                                            <label>
                                                                <b>Upload id #1 </b>
                                                            </label>
                                                            <div class="photo-holder mt-1">
                                                                <span>
                                                                    <img class="component-icon" *ngIf="purchaser?.layouts && purchaser?.layouts.length>0 && (purchaser?.layouts[0] && purchaser?.layouts[0]?.url)" [src]="purchaser?.layouts[0]?.url+'/350'"
                                                                        alt="">
                                                                    <img class="component-icon" *ngIf="!purchaser?.layouts || purchaser?.layouts.length==0 || (purchaser?.layouts[0] && !purchaser?.layouts[0]?.url)" src="assets/img/no-image.jpg"
                                                                        alt="">
                                                                </span>
                                                                <button *ngIf="!purchaser?.layouts || purchaser?.layouts.length==0 || (purchaser?.layouts[0] && !purchaser?.layouts[0]?.url)" class="btn btn-primary btn-sm photo-upload-btn">
                                                                    <i class="fa fa-upload"></i>
                                                                    <input type="file" id="uploadLogo1" accept="image/*" placeholder="Add Photo" (change)="uploadImage1($event.target.files,purchaser)">
                                                                </button>
                                                                <button *ngIf="purchaser?.layouts && purchaser?.layouts.length>0 &&  (purchaser?.layouts[0] && purchaser?.layouts[0]?.url) " (click)="deleteImage(purchaser.layouts[0])" class="btn btn-danger btn-sm photo-upload-btn">
                                                                    <i class="fa fa-trash"></i>
                                                                </button>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <label>
                                                                <b>Upload id #2 </b>
                                                            </label>
                                                            <div class="photo-holder mt-1">
                                                                <span>
                                                                    <img class="component-icon" *ngIf="purchaser?.layouts && purchaser?.layouts.length>0 && (purchaser?.layouts[1] && purchaser?.layouts[1]?.url) " [src]="purchaser?.layouts[1]?.url +'/350'"
                                                                        alt="">
                                                                    <img class="component-icon" *ngIf="!purchaser?.layouts || purchaser?.layouts.length==0 || (purchaser?.layouts[1] && !purchaser?.layouts[1]?.url)" src="assets/img/no-image.jpg"
                                                                        alt="">
                                                                </span>
                                                                <button *ngIf="!purchaser?.layouts || purchaser?.layouts.length==0 || (purchaser?.layouts[1] && !purchaser?.layouts[1]?.url)" class="btn btn-primary btn-sm photo-upload-btn">
                                                                    <i class="fa fa-upload"></i>
                                                                    <input type="file" id="uploadLogo2" accept="image/*" placeholder="Add Photo" (change)="uploadImage2($event.target.files,purchaser)">
                                                                </button>
                                                                <button *ngIf="purchaser?.layouts && purchaser?.layouts.length>0 && (purchaser?.layouts[1] && purchaser?.layouts[1]?.url) " (click)="deleteImage(purchaser.layouts[1])" class="btn btn-danger btn-sm photo-upload-btn">
                                                                    <i class="fa fa-trash"></i>
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-12 text-center" *ngIf="!dealDetailsObj?.purchasers || (dealDetailsObj?.purchasers && dealDetailsObj?.purchasers.length==0)">
                                            No Record Found
                                        </div>
                                    </div>
                                </div>
                            </ng-template>
                        </ngb-tab>
                        <ngb-tab id="deposits" title="Deposits">
                            <ng-template ngbTabContent>
                                <div class="row">
                                    <div class="col-md-12">
                                        <button [disabled]="(dealDetailsObj?.stage !='SIGNED' && dealDetailsObj?.stage !='OUT FOR SIGN' && dealDetailsObj?.stage !='RESERVED')" class="btn btn-sm btn-primary mr-2 mb-2" type="button" (click)="openSetupDepositStructure(updateDepositModal)">
                                            Change Deposit Structure
                                        </button>
                                        <button class="btn btn-sm btn-primary mr-2 mb-2" type="button" (click)="openReceivePaymentModal(receivePaymentModal)">
                                            Receive Payment
                                        </button>
                                    </div>
                                </div>
                                <div class="pt-2">
                                    <div class="row" *ngIf="depositedList && depositedList.length>0">
                                        <div class="col-md-12">
                                            <div class="card">
                                                <div class="card-body">
                                                    <h4>Deposit Schedule</h4>
                                                    <div class="table-responsive mb-5">
                                                        <table id="contactTable" class="table table-striped list_table" style="table-layout: fixed;">
                                                            <thead>
                                                                <tr>
                                                                    <th width="80px">##</th>
                                                                    <th width="80px">Percent</th>
                                                                    <th width="80px" class="text-right">Amount</th>
                                                                    <th width="80px">Due Date</th>
                                                                    <th width="80px" class="text-right">Payment Received</th>
                                                                    <th width="50px">Paid</th>
                                                                    <th width="50px"></th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr *ngFor="let item of depositedList; let i=index">
                                                                    <td>{{i+1}}</td>
                                                                    <td>{{item?.percent ? item?.percent+'%' :'-'}}</td>
                                                                    <td class="text-right">{{item?.amount ? (item?.amount | currency:'USD') :'-'}}</td>
                                                                    <td>{{item?.due_date |date:'yyyy-MM-dd'}}</td>
                                                                    <td class="text-right">{{item?.payment_received? (item?.payment_received | currency:'USD'): ''}}
                                                                    </td>
                                                                    <td>{{item?.is_paid ?'Yes':'No'}}</td>
                                                                    <td>
                                                                        <button [disabled]="item?.is_paid" class="btn btn-primary btn-sm mr-2" type="button" (click)="openEditDepositModal(editDepositModal,item,i)">
                                                                            <i class="fa fa-pencil-alt" aria-hidden="true"></i>
                                                                        </button>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td>Total</td>
                                                                    <td></td>
                                                                    <td class="text-right">{{dealDetailsObj?.total_amount | currency:'USD'}}</td>
                                                                    <td></td>
                                                                    <td class="text-right">
                                                                        {{dealDetailsObj?.total_amount_received | currency:'USD'}}
                                                                    </td>
                                                                    <td></td>
                                                                    <td></td>
                                                                </tr>
                                                                <tr *ngIf="depositedList.length==0">
                                                                    <td colspan="7">No Record Found</td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="pt-1">
                                    <div class="row" *ngIf="paymentList && paymentList.records.length>0">
                                        <div class="col-md-12">
                                            <div class="card">
                                                <div class="card-body">
                                                    <h4>Payments</h4>
                                                    <div class="table-responsive mb-5">
                                                        <table id="contactTable" class="table table-striped list_table" style="table-layout: fixed;">
                                                            <thead>
                                                                <tr>
                                                                    <th width="120px">Action</th>
                                                                    <th width="140px">Deposit Number</th>
                                                                    <th width="140px">Payment Date</th>
                                                                    <th width="150px" class="text-right">Payment Amount </th>
                                                                    <th width="140px">Payment Type</th>
                                                                    <th width="180px">Financial Institution</th>
                                                                    <th width="180px">Account Holder Name</th>
                                                                    <th width="100px">Account #</th>
                                                                    <th width="120px">Last 4 digits</th>
                                                                    <th width="60px">NSF</th>
                                                                    <th width="100px" class="text-right">Interest</th>
                                                                    <th width="100px" class="text-right">Penalty</th>
                                                                    <th width="100px" class="text-right">NSF Fee</th>
                                                                    <th width="250px">Notes</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr *ngFor="let item of paymentList.records; let i=index">
                                                                    <td>
                                                                        <ng-container *ngIf="item?.payment_type == 'CHEQUE' && !item?.nsf ">
                                                                            <button class="btn btn-sm btn-primary" type="button" (click)="openNSFModal(nsfModal,item)">
                                                                                NSF
                                                                            </button>
                                                                        </ng-container>
                                                                        <ng-container *ngIf="item?.payment_type != 'CHEQUE' || item?.nsf">-</ng-container>
                                                                    </td>
                                                                    <td>{{item?.deposit_no ? item?.deposit_no :'-'}}</td>
                                                                    <td>{{item?.payment_date | date:'yyyy-MM-dd'}}</td>
                                                                    <td class="text-right">{{item?.payment_amount ? (item?.payment_amount | currency:'USD'):'-'}}</td>
                                                                    <td>{{item?.payment_type ? item?.payment_type :'-'}}</td>
                                                                    <td>{{item?.financial_institution ? item?.financial_institution :'-'}}
                                                                    </td>
                                                                    <td>{{item?.account_holder_name ? item?.account_holder_name:'-'}}</td>
                                                                    <td>{{item?.account ? item?.account:'-'}}</td>
                                                                    <td>{{item?.last_4digits ? item?.last_4digits :'-'}}</td>
                                                                    <td>{{item?.nsf ? 'Yes' :'-'}}</td>
                                                                    <td class="text-right">{{item?.interest ? (item?.interest| currency:'USD') :'-'}}</td>
                                                                    <td class="text-right">{{item?.penalty ? (item?.penalty | currency:'USD'):'-'}}</td>
                                                                    <td class="text-right">{{item?.nsf_fee ? (item?.nsf_fee | currency:'USD'):'-'}}</td>
                                                                    <td>
                                                                        {{item?.notes ? item?.notes :'-'}}
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td colspan="3" class="text-right"> Total :</td>
                                                                    <td class="text-right">{{paymentList.total_amount ? (paymentList.total_amount | currency:'USD') : 0}}
                                                                    </td>
                                                                    <td colspan="6"></td>
                                                                    <td class="text-right">{{paymentList.total_interest ? (paymentList.total_interest | currency:'USD') : 0}}
                                                                    </td>
                                                                    <td class="text-right">{{paymentList.total_penalty ? (paymentList.total_penalty | currency:'USD') : 0}}
                                                                    </td>
                                                                    <td class="text-right">{{paymentList.nsf_fee_paid ? (paymentList.nsf_fee_paid | currency:'USD') : 0}}
                                                                    </td>
                                                                    <td></td>
                                                                </tr>
                                                                <tr *ngIf="paymentList.records.length==0">
                                                                    <td colspan="5">No Record Found</td>
                                                                    <td colspan="9"></td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="pt-1">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="card">
                                                <div class="card-body">
                                                    <h4> Cheque Images
                                                        <button style="float: right;" class="btn btn-sm btn-primary doc-img-up-btn mr-2" type="button">
                                                            Upload
                                                            <input class="doc-img-upload" accept=".pdf,.png,.jpg,.jpeg" type="file" (change)="onSelectChequeImage($event.target.files)">
                                                        </button>
                                                        <button style="float: right;" class="btn btn-sm btn-primary doc-img-up-btn mr-2" type="button">
                                                            Capture and Upload
                                                            <input class="doc-img-upload" type="file" capture="environment" accept="image/*" (change)="onSelectChequeImage($event.target.files)">
                                                        </button>
                                                    </h4>
                                                    <div class="table-responsive tableFixHead ng-tns-c2-3 ng-star-inserted mt-2">
                                                        <table class="table table-sm table-borderless" style="table-layout: fixed;">
                                                            <thead>
                                                                <tr>
                                                                    <th style="text-align: left;" width="30px"></th>
                                                                    <th style="text-align: left;" width="200px">Name</th>
                                                                    <th style="text-align: left;" width="100px">Date</th>
                                                                    <th width="100px"></th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <ng-container *ngIf="chequeDocuments.length>0">
                                                                    <tr *ngFor="let item of chequeDocuments">
                                                                        <td style="text-align: left;" [ngSwitch]="item.file_type">
                                                                            <span style="padding:0 5px;font-size: large" *ngSwitchCase="'pdf'">
                                                                                <i class="far fa-file-pdf"></i>
                                                                            </span>
                                                                            <span style="padding:0 5px;font-size: large" *ngSwitchCase="'jpg'">
                                                                                <i class="far fa-file-image"></i>
                                                                            </span>
                                                                            <span style="padding:0 5px;font-size: large" *ngSwitchCase="'jpeg'">
                                                                                <i class="far fa-file-image"></i>
                                                                            </span>
                                                                            <span style="padding:0 5px;font-size: large" *ngSwitchCase="'png'">
                                                                                <i class="far fa-file-image"></i>
                                                                            </span>
                                                                            <span style="padding:0 5px;font-size: large" *ngSwitchDefault>
                                                                                <i class="fa fa-file"></i>
                                                                            </span>
                                                                        </td>
                                                                        <td style="text-align: left;">
                                                                            {{item?.name}}
                                                                        </td>
                                                                        <td style="text-align: left;"> {{item?._created |date:'mediumDate'}}</td>
                                                                        <td class="text-right">
                                                                            <button class="btn btn-sm btn-primary mr-2" type="button" (click)="openPDFDocumentModal(openChequeDocument,item)">
                                                                                <i class="fas fa-eye" aria-hidden="true"></i>
                                                                            </button>
                                                                            <button class="btn btn-sm btn-primary mr-2" type="button" (click)="downloadDocument(item)">
                                                                                <i class="fa fa-download" aria-hidden="true"></i>
                                                                            </button>
                                                                        </td>
                                                                    </tr>
                                                                </ng-container>
                                                                <ng-container *ngIf="chequeDocuments.length==0">
                                                                    <tr>
                                                                        <td class="text-center" colspan="4"> No document found</td>
                                                                    </tr>
                                                                </ng-container>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </ng-template>
                        </ngb-tab>
                    </ngb-tabset>
                </div>
            </div>
        </div>
    </div>
</div>
<ng-template #addPurchaserModal>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Add Purchaser</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form autocomplete="off">
            <div class="step1">
                <div class="autocomplete-container">
                    <div class="form-group row">
                        <label for="Name" class="col-sm-12 col-form-label">Search for a contact
                            <span style="color:red">*</span>:</label>
                        <div class="col-sm-8 mb-2">
                            <div class="deal-box mb-2">
                                <p-autoComplete #autoCompleteObject type="search" (onDropdownClick)="onDropdownClick()" [(ngModel)]="formDetails.purchaser_name" [suggestions]="contactList" [ngModelOptions]="{standalone: true}" (completeMethod)="searchAuto($event,'')" field="show_name"></p-autoComplete>
                            </div>
                            <div class="error text-right mb-1" *ngIf="contactList.length==0 && autosearchText.length>0">
                                No results found
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <button class="btn btn-primary mr-1" type="button" (click)="openNewContact()">New Contact</button>
                        </div>
                    </div>
                    <div class="constituent-container" *ngIf="formDetails.purchaser_name?._id">
                        <p *ngIf="formDetails.purchaser_name">
                            Last Name : {{formDetails.purchaser_name?.last_name}}
                        </p>
                        <p *ngIf="formDetails.purchaser_name">
                            First Name : {{formDetails.purchaser_name?.first_name}}
                        </p>
                        <p *ngIf="formDetails.purchaser_name">
                            Middle Name : {{formDetails.purchaser_name?.middle_name}}
                        </p>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Close</button>
        <button type="button" class="btn btn-primary" (click)="addPurchaser()">Add</button>
    </div>
</ng-template>
<ng-template #addSolicitorModal>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Add Solicitor</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form autocomplete="off">
            <div class="step1">
                <div class="autocomplete-container">
                    <div class="form-group row">
                        <label for="Name" class="col-sm-12 col-form-label">Search for a contact
                            <span style="color:red">*</span>:</label>
                        <div class="col-sm-8 mb-2">
                            <div class="deal-box mb-2">
                                <p-autoComplete #autoCompleteObject type="search" (onDropdownClick)="onDropdownClick()" [(ngModel)]="formDetails.solicitor_name" [suggestions]="contactList" [ngModelOptions]="{standalone: true}" (completeMethod)="searchAuto($event,'Solicitor')" field="show_name"></p-autoComplete>
                            </div>
                            <div class="error text-right mb-1" *ngIf="contactList.length==0 && autosearchText.length>0">
                                No results found
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <button class="btn btn-primary mr-1" type="button" (click)="openNewSolicitor()">New Solicitor</button>
                        </div>
                    </div>
                    <div class="constituent-container" *ngIf="formDetails.solicitor_name?._id">
                        <p *ngIf="formDetails.solicitor_name">
                            Last Name : {{formDetails.solicitor_name?.last_name}}
                        </p>
                        <p *ngIf="formDetails.solicitor_name">
                            First Name : {{formDetails.solicitor_name?.first_name}}
                        </p>
                        <p *ngIf="formDetails.solicitor_name">
                            Middle Name : {{formDetails.solicitor_name?.middle_name}}
                        </p>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Close</button>
        <button type="button" class="btn btn-primary" (click)="addSolicitor()">Add</button>
    </div>
</ng-template>
<ng-template #addThirdPartyModal>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Add Third Party</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form autocomplete="off">
            <div class="step1">
                <div class="autocomplete-container">
                    <div class="form-group row">
                        <label for="Name" class="col-sm-12 col-form-label">Search for a contact
                            <span style="color:red">*</span>:</label>
                        <div class="col-sm-8 mb-2">
                            <div class="deal-box mb-2">
                                <p-autoComplete #autoCompleteObject type="search" (onDropdownClick)="onDropdownClick()" [(ngModel)]="formDetails.third_party" [suggestions]="contactList" [ngModelOptions]="{standalone: true}" (completeMethod)="searchAuto($event,'Third Party')" field="show_name"></p-autoComplete>
                            </div>
                            <div class="error text-right mb-1" *ngIf="contactList.length==0 && autosearchText.length>0">
                                No results found
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <button class="btn btn-primary mr-1" type="button" (click)="openNewThirdParty()">New Third Party</button>
                        </div>
                    </div>
                    <div class="constituent-container" *ngIf="formDetails.third_party?._id">
                        <p *ngIf="formDetails.third_party">
                            Last Name : {{formDetails.third_party?.last_name}}
                        </p>
                        <p *ngIf="formDetails.third_party">
                            First Name : {{formDetails.third_party?.first_name}}
                        </p>
                        <p *ngIf="formDetails.third_party">
                            Middle Name : {{formDetails.third_party?.middle_name}}
                        </p>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Close</button>
        <button type="button" class="btn btn-primary" (click)="addThirdParty()">Add</button>
    </div>
</ng-template>
<ng-template #assignUnitModal>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Assign Unit</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form autocomplete="off">
            <div class="form-group row">
                <label class="col-md-3 coltrol-label mt-1 mb-0">Project
                    <span style="color:red">*</span>:</label>
                <div class="col-md-5">
                    <select class="form-select" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.project_id" id="projectId" (change)="changeProject()">
                        <option value="">Select Project</option>
                        <option *ngFor="let item of projectList" value={{item._id}}>{{item.name}}</option>
                    </select>
                </div>
            </div>
            <div class="form-group row">
                <label class="col-md-3 coltrol-label mt-1 mb-0">Suite #
                    <span style="color:red">*</span>:</label>
                <div class="col-md-5 mb-2">
                    <input (keyup)="unitInputChanged($event.target.value)" #unit="ngModel" [disabled]="!formDetails.project_id" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.unit_no" type="number" min="1" class="form-control" id="unit_no">
                    <div class="error" *ngIf="!formDetails.project_id">
                        Select project
                    </div>
                    <div class="error" *ngIf="formDetails.project_id && formDetails.unit_no && (!isUnitAvailable && (unit.dirty || unit.touched))">
                        Unit is not available
                    </div>
                    <div class="error" *ngIf="!isSearching && formDetails.project_id && unitList.length==0">
                        Units are not present for this project.
                    </div>
                </div>
                <div class="col-md-4">
                    <button type="button" [disabled]="!formDetails.project_id" class="btn btn-primary btn-block  pl-1 pr-1" (click)="openCheckInventoryModal(inventoryModal)">Check Inventory</button>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-md-3 m">Deal Type:</div>
                <div class="col-md-9">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group form-check mb-2">
                                <input type="radio" [(ngModel)]="formDetails.deal_type" value="Insider Deal" class="form-check-input" name="deal_type" id="insiderDeal">
                                <label class="form-check-label" for="insiderDeal">Insider Deal</label>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group form-check mb-2">
                                <input type="radio" [(ngModel)]="formDetails.deal_type" value="China Deal" class="form-check-input" name="deal_type" id="chinaDeal">
                                <label class="form-check-label" for="chinaDeal">China Deal</label>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group form-check mb-2">
                                <input type="radio" [(ngModel)]="formDetails.deal_type" value="Internatioanl Deal" class="form-check-input" name="deal_type" id="internatioanlDeal">
                                <label class="form-check-label" for="internatioanlDeal">Internatioanl Deal</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <label class="col-md-3 coltrol-label mt-1 mb-0">Deposit structure
                    <span style="color:red">*</span>:</label>
                <div class="col-md-5">
                    <select [disabled]="!formDetails.project_id || !formDetails.unit_no" (change)="onChangeDepositeStructure()" class="form-control" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.deposit_structure" id="Depositstructure">
                        <option value="">Select deposit structure</option>
                        <option *ngFor="let item of depositList" value={{item._id}}>{{item.name}}</option>
                    </select>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6" *ngIf="formDetails.deposit_structure">
                    <label>Start Date :
                        <b> &nbsp;&nbsp;&nbsp;{{this.formDetails.start | date:'yyyy-MM-dd'}}</b>
                    </label>
                </div>
                <div class="col-md-6" *ngIf="formDetails.deposit_structure">
                    <label>End Date :
                        <b>&nbsp;&nbsp;&nbsp;{{this.formDetails.end | date:'yyyy-MM-dd'}}</b>
                    </label>
                </div>
            </div>
            <ng-container *ngIf="depositInfo.length>0">
                <div class="col-md-12">
                    <div class="mb-5">
                        <table id="contactTable" class="table table-striped list_table" style="table-layout: fixed;">
                            <thead>
                                <tr>
                                    <th width="80px"></th>
                                    <th width="150px">Percent</th>
                                    <th width="150px">Amount</th>
                                    <th width="150px">Due Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let item of depositInfo;let i=index">
                                    <td>{{i==0?'Initial':i+1}}</td>
                                    <td>{{item?.percent ? item?.percent+'%' :'-'}}</td>
                                    <td>{{item?.amount ? (item?.amount | currency:'USD') :'-'}}</td>
                                    <td>
                                        {{item?.due_date |date:'yyyy-MM-dd'}}
                                        <!-- <div class="input-group">
                                            <input type="text" class="form-control form-control-sm" container="" placeholder="YYYY-MM-DD" #endDate="bsDatepicker" bsDatepicker
                                                [bsConfig]="{ containerClass: 'theme-dark-blue',showTodayButton: true, todayPosition: 'center',showClearButton: true, clearPosition: 'right',isAnimated: true,adaptivePosition: true,dateInputFormat: 'YYYY-MM-DD',  returnFocusToInput: true }"
                                                [(ngModel)]="item.due_date" [ngModelOptions]="{standalone: true}">
                                            <span class=" input-group-prepend" (click)="endDate.toggle()" [attr.aria-expanded]="endDate.isOpen">
                                                <span class="input-group-text">
                                                    <i class="fa fa-calendar"></i>
                                                </span>
                                            </span>
                                        </div> -->
                                    </td>
                                </tr>
                                <tr>
                                    <td>Total</td>
                                    <td></td>
                                    <td>{{formDetails?.total_amount | currency:'USD'}}</td>
                                    <td></td>
                                </tr>
                                <tr *ngIf="depositInfo.length==0">
                                    <td colspan="4">No Record Found</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </ng-container>
            <div class="info-message bg-warning" *ngIf="!isSearching && formDetails.project_id && unitsSoldOut">
                Units sold out for the project&nbsp;
                <b>{{selectedProject?.name}}</b>.
            </div>
            <div class="info-message bg-warning" *ngIf="!isSearching && formDetails.project_id && depositList.length==0">
                Please create a deposit structure for the project&nbsp;
                <b>{{selectedProject?.name}}</b>.
            </div>
            <div class="info-message bg-warning" *ngIf="!isSearching && formDetails.unit_no && !isSalesPriceAvailable">
                Please add sales price for the unit&nbsp;
                <b>{{formDetails.unit_no}}</b>.
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Close</button>
        <button type="button" class="btn btn-primary" (click)="assignUnit()">Add</button>
    </div>
</ng-template>
<ng-template #assignBrokerModal>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Assign Broker</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form autocomplete="off">
            <div class="step1">
                <div class="autocomplete-container">
                    <div class="form-group row">
                        <label for="Name" class="col-sm-12 col-form-label">Search for a broker
                            <span style="color:red">*</span>:</label>
                        <div class="col-sm-8 mb-2">
                            <div class="deal-box mb-2">
                                <p-autoComplete #autoCompleteObject type="search" (onDropdownClick)="onDropdownClick()" [(ngModel)]="formDetails.broker_name" [suggestions]="contactList" [ngModelOptions]="{standalone: true}" (completeMethod)="searchAuto($event,'Broker')" field="show_name"
                                    [multiple]="true"></p-autoComplete>
                            </div>
                            <div class="error text-right mb-1" *ngIf="contactList.length==0 && autosearchText.length>0">
                                No results found
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <button class="btn btn-primary mr-1" type="button" (click)="openNewBroker()">New Broker</button>
                        </div>
                    </div>
                    <div class="constituent-container" *ngIf="formDetails?.broker_name.length>0">
                        <p *ngFor="let broker of formDetails?.broker_name">
                            {{broker?._id}},{{broker?.display_name}},{{broker?.email?.email}},{{broker?.phone?.number}}
                        </p>
                    </div>
                    <h5 *ngIf="dealDetailsObj?.brokers && dealDetailsObj?.brokers.length>0">Existing Brokers</h5>
                    <div class="row" *ngFor="let broker of dealDetailsObj?.brokers;let j=index">
                        <div class="col-md-10">
                            {{broker?.broker_id}},{{broker?.broker_name}},{{broker?.email}},{{broker?.phone}}
                        </div>
                        <div class="col-md-2">
                            <button class="btn btn-sm btn-danger mb-2" type="button" (click)="deleteBroker(broker,j)">
                                <i class="fa fa-trash" aria-hidden="true"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Close</button>
        <button type="button" class="btn btn-primary" (click)="addBroker()">Add</button>
    </div>
</ng-template>
<ng-template #assignSalesAgentModal>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Assign Sales Agent</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form autocomplete="off">
            <div class="step1">
                <div class="autocomplete-container">
                    <div class="form-group row">
                        <label for="Name" class="col-sm-12 col-form-label">Search for a sales agent
                            <span style="color:red">*</span>:</label>
                        <div class="col-sm-8 ">
                            <div class="deal-box mb-2">
                                <p-autoComplete #autoCompleteObject type="search" (onDropdownClick)="onDropdownClick()" [(ngModel)]="formDetails.sales_agent_name" [suggestions]="contactList" [ngModelOptions]="{standalone: true}" (completeMethod)="searchAuto($event,'Sales Agent')" field="show_name"
                                    [multiple]="true"> </p-autoComplete>
                            </div>
                            <div class="error text-right mb-1" *ngIf="contactList.length==0 && autosearchText.length>0">
                                No results found
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <button class="btn btn-primary mr-1" type="button" (click)="openNewSalesAgent()">New Sales Agent</button>
                        </div>
                    </div>
                    <div class="constituent-container" *ngIf="formDetails?.sales_agent_name.length>0">
                        <p *ngFor="let saleAgent of formDetails?.sales_agent_name">
                            {{saleAgent?._id}},{{saleAgent?.display_name}},{{saleAgent?.email?.email}},{{saleAgent?.phone?.number}}
                        </p>
                    </div>
                    <h5 *ngIf="dealDetailsObj?.sales_agents && dealDetailsObj?.sales_agents.length>0">Existing Sales Agents</h5>
                    <div class="row" *ngFor="let agent of dealDetailsObj?.sales_agents;let j=index">
                        <div class="col-md-10">
                            {{agent?.sales_agent_id}},{{agent?.sales_agent_name}},{{agent?.email}},{{agent?.phone}}
                        </div>
                        <div class="col-md-2">
                            <button class="btn btn-sm btn-danger mb-2" type="button" (click)="deleteSalesAgent(agent,j)">
                                <i class="fa fa-trash" aria-hidden="true"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Close</button>
        <button type="button" class="btn btn-primary" (click)="addSalesAgent()">Add</button>
    </div>
</ng-template>
<ng-template #confirmReleaseUnitModal>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Release Unit</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form autocomplete="off">
            <h6>
                Please confirm to release the reserved unit. Unit will be retured to Inventory and available for others to Buy
            </h6>
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Comments
                            <span style="color:red">*</span>:
                        </label>
                        <div class="col-sm-12">
                            <textarea class="form-control" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.release_comment" name="coment" id="comment" cols="55" rows="12">
                            </textarea>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Close</button>
        <button type="button" class="btn btn-danger" (click)="onReleaseUnit()">Yes, Release Unit</button>
    </div>
</ng-template>
<ng-template #agreementSigned>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Confirm Agreement Signed</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form autocomplete="off">
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <label class="col-form-label"> Signed Date
                            <span style="color:red">*</span>:</label>
                        <div class="input-group">
                            <input type="text" (bsValueChange)="onSignedDateChanged($event)" class="form-control" placeholder="YYYY-MM-DD" #signedDate="bsDatepicker" bsDatepicker [bsConfig]="{ containerClass: 'theme-dark-blue',showTodayButton: true, todayPosition: 'center',showClearButton: true, clearPosition: 'right',isAnimated: true,adaptivePosition: true,dateInputFormat: 'YYYY-MM-DD',  returnFocusToInput: true }"
                                [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.signed_date">
                            <span class=" input-group-prepend" (click)="signedDate.toggle()" [attr.aria-expanded]="signedDate.isOpen">
                                <span class="input-group-text">
                                    <i class="fa fa-calendar"></i>
                                </span>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Cooling Period (days):
                            <b> {{formDetails?.cooling_period ? formDetails?.cooling_period: 'NA'}}</b>
                        </label>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Cooling Period Extension(days):
                            <b> {{formDetails?.cooling_period_extended ? formDetails?.cooling_period_extended : 'NA'}}</b>
                        </label>
                    </div>
                </div>
                <!-- <div class="col-md-12">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Firm Date :
                            <b> {{formDetails.firm_date | date:'yyyy-MM-dd' }}</b>
                        </label>
                    </div>
                </div> -->
                <!-- <div class="col-md-12">
                    <div class="form-group">
                        <label class="col-form-label"> Firm Date :</label>
                        <div class="input-group">
                            <input type="text" class="form-control" (bsValueChange)="onFirmDateChanged($event)" placeholder="YYYY-MM-DD" #firmDate="bsDatepicker"
                                bsDatepicker [bsConfig]="{ containerClass: 'theme-dark-blue',showTodayButton: true, todayPosition: 'center',showClearButton: true, clearPosition: 'right',isAnimated: true,adaptivePosition: true,dateInputFormat: 'YYYY-MM-DD',  returnFocusToInput: true }"
                                [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.firm_date">
                            <span class=" input-group-prepend" (click)="firmDate.toggle()" [attr.aria-expanded]="firmDate.isOpen">
                                <span class="input-group-text">
                                    <i class="fa fa-calendar"></i>
                                </span>
                            </span>
                        </div>
                    </div>
                </div> -->
                <div class="col-md-12">
                    <div class="form-group row">
                        <label class="col-sm-12 coltrol-label mt-1 mb-0">Notes</label>
                        <div class="col-sm-12">
                            <textarea type="text" cols="5" rows="7" [ngModelOptions]="{standalone: true}" name="notes" [(ngModel)]="formDetails.signed_note" class="form-control"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Close</button>
        <button type="button" class="btn btn-primary" (click)="addAgreementSigned()">Save</button>
    </div>
</ng-template>
<ng-template #applyExtention>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Apply Extension</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form autocomplete="off">
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <label class="col-form-label ">Cooling Period (days):
                            <b> {{formDetails.cooling_period}}</b>
                        </label>
                    </div>
                </div>

                <div class="col-md-12">
                    <div class="form-group">
                        <label class="col-form-label">Extension (days):
                        </label>
                        <input type="number" class="form-control" min="1" (change)="extendeDaysChange($event.target.value)" [(ngModel)]="formDetails.cooling_period_extended" [ngModelOptions]="{standalone: true}">
                    </div>
                </div>
                <div class="col-md-12" *ngIf="formDetails.pre_firm_date">
                    <div class="form-group">
                        <label class="col-form-label">Current Firm Date :
                            <b>{{formDetails.pre_firm_date | date:'yyyy-MM-dd' }}</b>
                        </label>
                    </div>
                </div>
                <div class="col-md-12" *ngIf="formDetails.pre_firm_date">
                    <div class="form-group">
                        <label class="col-form-label">New Firm Date :
                            <b>{{formDetails.firm_date | date:'yyyy-MM-dd' }}</b>
                        </label>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Close</button>
        <button type="button" class="btn btn-primary" (click)="addExtention()">Save</button>
    </div>
</ng-template>
<ng-template #datesDetailsModal>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Edit Dates</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form autocomplete="off">
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label class="col-form-label"> Initiated Date :</label>
                        <div class="input-group">
                            <input disabled type="text" class="form-control" placeholder="YYYY-MM-DD" #initiatedDate="bsDatepicker" bsDatepicker [bsConfig]="{ containerClass: 'theme-dark-blue',showTodayButton: true, todayPosition: 'center',showClearButton: true, clearPosition: 'right',isAnimated: true,adaptivePosition: true,dateInputFormat: 'YYYY-MM-DD',  returnFocusToInput: true }"
                                [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.initiated_on">
                            <span class=" input-group-prepend" (click)="initiatedDate.toggle()" [attr.aria-expanded]="initiatedDate.isOpen">
                                <span class="input-group-text">
                                    <i class="fa fa-calendar"></i>
                                </span>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="col-md-4" *ngIf="formDetails.out_for_sign_date">
                    <div class="form-group">
                        <label class="col-form-label"> Signing Out Date :</label>
                        <div class="input-group">
                            <input type="text" class="form-control" placeholder="YYYY-MM-DD" #signingOutDate="bsDatepicker" bsDatepicker [bsConfig]="{ containerClass: 'theme-dark-blue',showTodayButton: true, todayPosition: 'center',showClearButton: true, clearPosition: 'right',isAnimated: true,adaptivePosition: true,dateInputFormat: 'YYYY-MM-DD',  returnFocusToInput: true }"
                                [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.out_for_sign_date">
                            <span class=" input-group-prepend" (click)="signingOutDate.toggle()" [attr.aria-expanded]="signingOutDate.isOpen">
                                <span class="input-group-text">
                                    <i class="fa fa-calendar"></i>
                                </span>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label class="col-form-label"> Signed Date :</label>
                        <div class="input-group">
                            <input disabled type="text" class="form-control" placeholder="YYYY-MM-DD" #signedOnDate="bsDatepicker" bsDatepicker [bsConfig]="{ containerClass: 'theme-dark-blue',showTodayButton: true, todayPosition: 'center',showClearButton: true, clearPosition: 'right',isAnimated: true,adaptivePosition: true,dateInputFormat: 'YYYY-MM-DD',  returnFocusToInput: true }"
                                [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.signed_date">
                            <span class=" input-group-prepend" (click)="signedOnDate.toggle()" [attr.aria-expanded]="signedOnDate.isOpen">
                                <span class="input-group-text">
                                    <i class="fa fa-calendar"></i>
                                </span>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label class="col-form-label"> Executed Date :</label>
                        <div class="input-group">
                            <input type="text" class="form-control" placeholder="YYYY-MM-DD" #executedDate="bsDatepicker" bsDatepicker [bsConfig]="{ containerClass: 'theme-dark-blue',showTodayButton: true, todayPosition: 'center',showClearButton: true, clearPosition: 'right',isAnimated: true,adaptivePosition: true,dateInputFormat: 'YYYY-MM-DD',  returnFocusToInput: true }"
                                [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.executed_date">
                            <span class=" input-group-prepend" (click)="executedDate.toggle()" [attr.aria-expanded]="executedDate.isOpen">
                                <span class="input-group-text">
                                    <i class="fa fa-calendar"></i>
                                </span>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label class="col-form-label"> Acknowledgement Date :
                        </label>
                        <div class="input-group">
                            <input type="text" class="form-control" placeholder="YYYY-MM-DD" #acknowledgementDate="bsDatepicker" bsDatepicker [bsConfig]="{ containerClass: 'theme-dark-blue',showTodayButton: true, todayPosition: 'center',showClearButton: true, clearPosition: 'right',isAnimated: true,adaptivePosition: true,dateInputFormat: 'YYYY-MM-DD',  returnFocusToInput: true }"
                                [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.acknowledgement_date">
                            <span class=" input-group-prepend" (click)="acknowledgementDate.toggle()" [attr.aria-expanded]="acknowledgementDate.isOpen">
                                <span class="input-group-text">
                                    <i class="fa fa-calendar"></i>
                                </span>
                            </span>
                        </div>
                    </div>
                </div>
                <!-- <div class="col-md-4">
                    <div class="form-group">
                        <label class="col-form-label">Extension Days:
                        </label>
                        <input type="number" class="form-control" min="1" (keyup)="extendeDaysChange($event.target.value)" [(ngModel)]="formDetails.cooling_period_extended"
                            [ngModelOptions]="{standalone: true}">
                    </div>
                </div> -->
                <div class="col-md-4">
                    <div class="form-group">
                        <label class="col-form-label"> Firm Date :</label>
                        <div class="input-group">
                            <input disabled type="text" class="form-control" placeholder="YYYY-MM-DD" #firmDate="bsDatepicker" bsDatepicker [bsConfig]="{ containerClass: 'theme-dark-blue',showTodayButton: true, todayPosition: 'center',showClearButton: true, clearPosition: 'right',isAnimated: true,adaptivePosition: true,dateInputFormat: 'YYYY-MM-DD',  returnFocusToInput: true }"
                                [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.firm_date">
                            <span class=" input-group-prepend" (click)="firmDate.toggle()" [attr.aria-expanded]="firmDate.isOpen">
                                <span class="input-group-text">
                                    <i class="fa fa-calendar"></i>
                                </span>
                            </span>
                        </div>
                    </div>
                </div>
                <!-- <div class="col-md-4">
                    <div class="form-group">
                        <label class="col-form-label"> Distribution Date :</label>
                        <div class="input-group">
                            <input type="text" class="form-control" placeholder="YYYY-MM-DD" #distributionDate="bsDatepicker" bsDatepicker [bsConfig]="{ containerClass: 'theme-dark-blue',showTodayButton: true, todayPosition: 'center',showClearButton: true, clearPosition: 'right',isAnimated: true,adaptivePosition: true,dateInputFormat: 'YYYY-MM-DD',  returnFocusToInput: true }"
                                [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.distribution_date">
                            <span class=" input-group-prepend" (click)="distributionDate.toggle()" [attr.aria-expanded]="distributionDate.isOpen">
                                <span class="input-group-text">
                                    <i class="fa fa-calendar"></i>
                                </span>
                            </span>
                        </div>
                    </div>
                </div> -->
                <!-- <div class="col-md-4">
                    <div class="form-group">
                        <label class="col-form-label"> Expected Completion Date :</label>
                        <div class="input-group">
                            <input type="text" class="form-control" placeholder="YYYY-MM-DD" #expectedCompletionDate="bsDatepicker" bsDatepicker [bsConfig]="{ containerClass: 'theme-dark-blue',showTodayButton: true, todayPosition: 'center',showClearButton: true, clearPosition: 'right',isAnimated: true,adaptivePosition: true,dateInputFormat: 'YYYY-MM-DD',  returnFocusToInput: true }"
                                [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.expected_completion_date">
                            <span class=" input-group-prepend" (click)="expectedCompletionDate.toggle()" [attr.aria-expanded]="expectedCompletionDate.isOpen">
                                <span class="input-group-text">
                                    <i class="fa fa-calendar"></i>
                                </span>
                            </span>
                        </div>
                    </div>
                </div> -->
                <!-- <div class="col-md-4">
                    <div class="form-group">
                        <label class="col-form-label"> Actual Completion Date :</label>
                        <div class="input-group">
                            <input type="text" class="form-control" placeholder="YYYY-MM-DD" #actualCompletionDate="bsDatepicker" bsDatepicker [bsConfig]="{ containerClass: 'theme-dark-blue',showTodayButton: true, todayPosition: 'center',showClearButton: true, clearPosition: 'right',isAnimated: true,adaptivePosition: true,dateInputFormat: 'YYYY-MM-DD',  returnFocusToInput: true }"
                                [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.actual_completion_date">
                            <span class=" input-group-prepend" (click)="actualCompletionDate.toggle()" [attr.aria-expanded]="actualCompletionDate.isOpen">
                                <span class="input-group-text">
                                    <i class="fa fa-calendar"></i>
                                </span>
                            </span>
                        </div>
                    </div>
                </div> -->
                <!-- <div class="col-md-4">
                    <div class="form-group">
                        <label class="col-form-label"> Closing Date :</label>
                        <div class="input-group">
                            <input type="text" class="form-control" placeholder="YYYY-MM-DD" #closingDate="bsDatepicker" bsDatepicker [bsConfig]="{ containerClass: 'theme-dark-blue',showTodayButton: true, todayPosition: 'center',showClearButton: true, clearPosition: 'right',isAnimated: true,adaptivePosition: true,dateInputFormat: 'YYYY-MM-DD',  returnFocusToInput: true }"
                                [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.closing_date">
                            <span class=" input-group-prepend" (click)="closingDate.toggle()" [attr.aria-expanded]="closingDate.isOpen">
                                <span class="input-group-text">
                                    <i class="fa fa-calendar"></i>
                                </span>
                            </span>
                        </div>
                    </div>
                </div> -->
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Close</button>
        <button type="button" class="btn btn-primary" (click)="updateDates()">Save</button>
    </div>
</ng-template>
<ng-template #editPurchaserDetailsModal>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Edit Purchaser {{formDetails.purchaserNo}}</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form autocomplete="off">
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">First Name
                            <span style="color:red">*</span>:</label>
                        <div class="col-sm-12">
                            <input type="text" [ngModelOptions]="{standalone: true}" name="first_name" [(ngModel)]="formDetails.first_name" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Middle Name :</label>
                        <div class="col-sm-12">
                            <input type="text" [ngModelOptions]="{standalone: true}" name="middle_name" [(ngModel)]="formDetails.middle_name" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Last Name
                            <span style="color:red">*</span>:</label>
                        <div class="col-sm-12">
                            <input type="text" [ngModelOptions]="{standalone: true}" name="last_name" [(ngModel)]="formDetails.last_name" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Legal Name :
                        </label>
                        <div class="col-sm-12">
                            <input type="text" [ngModelOptions]="{standalone: true}" name="legal_full_name" [(ngModel)]="formDetails.legal_full_name" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Date of Birth :
                        </label>
                        <div class="col-sm-12">
                            <div class="input-group">
                                <input type="text" class="form-control" #start="bsDatepicker" bsDatepicker [bsConfig]="{ containerClass: 'theme-dark-blue',showTodayButton: true, todayPosition: 'center',showClearButton: true, clearPosition: 'right',isAnimated: true,adaptivePosition: true,dateInputFormat: 'YYYY-MM-DD' }"
                                    [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.dob" placeholder="YYYY-MM-DD">
                                <span class=" input-group-prepend" (click)="start.toggle()" [attr.aria-expanded]="start.isOpen">
                                    <span class="input-group-text">
                                        <i class="fa fa-calendar"></i>
                                    </span>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Street1:</label>
                        <div class="col-sm-12">
                            <input type="text" name="street1" [(ngModel)]="formDetails.addresses.street1" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Street2:</label>
                        <div class="col-sm-12">
                            <input type="text" name="street2" [(ngModel)]="formDetails.addresses.street2" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Street3:</label>
                        <div class="col-sm-12">
                            <input type="text" name="street3" [(ngModel)]="formDetails.addresses.street3" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Zip :
                        </label>
                        <div class="col-sm-12">
                            <input type="text" name="zip" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.addresses.zip" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Country :
                        </label>
                        <div class="col-sm-12">
                            <input type="text" name="country" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.addresses.country" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Province/State :
                        </label>
                        <div class="col-sm-12">
                            <input type="text" name="state" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.addresses.state" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">City :
                        </label>
                        <div class="col-sm-12">
                            <input type="text" name="city" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.addresses.city" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Home Phone :</label>
                        <div class="col-sm-12">
                            <form #f="ngForm" [formGroup]="homePhone">
                                <ngx-intl-tel-input [cssClass]="'custom'" [preferredCountries]="preferredCountries" [enableAutoCountrySelect]="true" [enablePlaceholder]="true" [searchCountryFlag]="true" [searchCountryField]="[SearchCountryField.Iso2, SearchCountryField.Name]" [selectFirstCountry]="false"
                                    [selectedCountryISO]="CountryISO.Canada" [maxLength]="15" [phoneValidation]="true" [separateDialCode]="separateDialCode" name="home" formControlName="home_phone">
                                </ngx-intl-tel-input>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Mobile Phone :</label>
                        <div class="col-sm-12">
                            <form #f="ngForm" [formGroup]="mobilePhone">
                                <ngx-intl-tel-input [cssClass]="'custom'" [preferredCountries]="preferredCountries" [enableAutoCountrySelect]="true" [enablePlaceholder]="true" [searchCountryFlag]="true" [searchCountryField]="[SearchCountryField.Iso2, SearchCountryField.Name]" [selectFirstCountry]="false"
                                    [selectedCountryISO]="CountryISO.Canada" [maxLength]="15" [phoneValidation]="true" [separateDialCode]="separateDialCode" name="mobile" formControlName="mobile_phone">
                                </ngx-intl-tel-input>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Work Phone :</label>
                        <div class="col-sm-12">
                            <form #f="ngForm" [formGroup]="workPhone">
                                <ngx-intl-tel-input [cssClass]="'custom'" [preferredCountries]="preferredCountries" [enableAutoCountrySelect]="true" [enablePlaceholder]="true" [searchCountryFlag]="true" [searchCountryField]="[SearchCountryField.Iso2, SearchCountryField.Name]" [selectFirstCountry]="false"
                                    [selectedCountryISO]="CountryISO.Canada" [maxLength]="15" [phoneValidation]="true" [separateDialCode]="separateDialCode" name="work" formControlName="work_phone">
                                </ngx-intl-tel-input>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label"> Personal Email :
                        </label>
                        <div class="col-sm-12">
                            <input type="email" name="email" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.personal_email" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label"> Work Email :
                        </label>
                        <div class="col-sm-12">
                            <input type="email" name="email" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.work_email" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Sin :
                        </label>
                        <div class="col-sm-12">
                            <input type="text" name="sin" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.sin" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Profession</label>
                        <div class="col-sm-12">
                            <input type="text" name="profession" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.profession" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Client Risk</label>
                        <div class="col-sm-12">
                            <input type="text" name="client_risk" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.client_risk" class="form-control">
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Close</button>
        <button type="button" class="btn btn-primary" (click)="updatePurchaser()">Save</button>
    </div>
</ng-template>
<ng-template #updateDepositModal>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Change Deposit Structure</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form autocomplete="off">
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Project :
                            <b> {{dealDetailsObj?.unit?.project_name}}</b>
                        </label>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Unit#:
                            <b> {{dealDetailsObj?.unit?.unit_no}}</b>
                        </label>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-sm-12 coltrol-label mt-1 mb-0">Deposit Structure
                            <span style="color:red">*</span>:</label>
                        <div class="col-sm-12">
                            <select (change)="onDepositChange()" [disabled]="!dealDetailsObj?.unit?.project_id" class="form-select" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.deposit_structure" id="depositstructure">
                                <option value="">Select deposit structure</option>
                                <option *ngFor="let item of depositList" value={{item._id}}>{{item.name}}</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6" *ngIf="formDetails.deposit_structure">
                        <label>Start Date :
                            <b> &nbsp;&nbsp;&nbsp;{{this.formDetails.start | date:'yyyy-MM-dd'}}</b>
                        </label>
                    </div>
                    <div class="col-md-6" *ngIf="formDetails.deposit_structure">
                        <label>End Date :
                            <b>&nbsp;&nbsp;&nbsp;{{this.formDetails.end | date:'yyyy-MM-dd'}}</b>
                        </label>
                    </div>
                </div>
                <ng-container>
                    <div class="col-md-12">
                        <div class="mb-5">
                            <table id="contactTable" class="table table-striped list_table" style="table-layout: fixed;">
                                <thead>
                                    <tr>
                                        <th width="80px"></th>
                                        <th width="150px">Percent</th>
                                        <th width="150px">Amount</th>
                                        <th width="150px">Due Date</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let item of depositInfo;let i=index">
                                        <td>{{i==0?'Initial':i+1}}</td>
                                        <td>{{item?.percent ? item?.percent+'%' :'-'}}</td>
                                        <td>{{item?.amount ? (item?.amount | currency:'USD') :'-'}}</td>
                                        <td>
                                            <!-- {{item?.due_date |date:'yyyy-MM-dd'}} -->
                                            <div class="input-group">
                                                <input type="text" class="form-control form-control-sm" container="" placeholder="YYYY-MM-DD" #endDate="bsDatepicker" bsDatepicker [bsConfig]="{ containerClass: 'theme-dark-blue',showTodayButton: true, todayPosition: 'center',showClearButton: true, clearPosition: 'right',isAnimated: true,adaptivePosition: true,dateInputFormat: 'YYYY-MM-DD',  returnFocusToInput: true }"
                                                    [(ngModel)]="item.due_date" [ngModelOptions]="{standalone: true}">
                                                <span class=" input-group-prepend" (click)="endDate.toggle()" [attr.aria-expanded]="endDate.isOpen">
                                                    <span class="input-group-text">
                                                        <i class="fa fa-calendar"></i>
                                                    </span>
                                                </span>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Total</td>
                                        <td></td>
                                        <td>{{formDetails?.total_amount | currency:'USD'}}</td>
                                        <td></td>
                                    </tr>
                                    <tr *ngIf="depositInfo.length==0">
                                        <td colspan="4">No Record Found</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </ng-container>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Close</button>
        <button type="button" class="btn btn-primary" (click)="onDepositStructureChange()">Save</button>
    </div>
</ng-template>
<ng-template #editDepositModal>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Update Deposit Structure</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="editDepositModalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form autocomplete="off">
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 coltrol-label mt-1 mb-0">Project Name :
                            <b> {{formDetails?.project_name}}</b>
                        </label>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 coltrol-label mt-1 mb-0">Unit :
                            <b> {{formDetails?.unit_no}}</b>
                        </label>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 coltrol-label mt-1 mb-0">Deposit No :
                            <b> {{formDetails?.deposit_no}}</b>
                        </label>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-sm-12 coltrol-label mt-1 mb-0">Percent :</label>
                        <div class="col-sm-12">
                            <input type="number" min="0" disabled [ngModelOptions]="{standalone: true}" name="percent" [(ngModel)]="formDetails.percent" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-sm-12 coltrol-label mt-1 mb-0">Amount :</label>
                        <div class="col-sm-12">
                            <input type="number" min="0" disabled [ngModelOptions]="{standalone: true}" name="amount" [(ngModel)]="formDetails.amount" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-sm-12 coltrol-label mt-1 mb-0">Due Date :</label>
                        <div class="col-sm-12 input-group">
                            <input type="text" class="form-control" placeholder="YYYY-MM-DD" #dueDate="bsDatepicker" bsDatepicker [bsConfig]="{ containerClass: 'theme-dark-blue',showTodayButton: true, todayPosition: 'center',showClearButton: true, clearPosition: 'right',isAnimated: true,adaptivePosition: true,dateInputFormat: 'YYYY-MM-DD',  returnFocusToInput: true }"
                                [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.due_date">
                            <span class=" input-group-prepend" (click)="dueDate.toggle()" [attr.aria-expanded]="dueDate.isOpen">
                                <span class="input-group-text">
                                    <i class="fa fa-calendar"></i>
                                </span>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="editDepositModalRef.hide()">Close</button>
        <button type="button" class="btn btn-primary" (click)="updateDepositStructure()">Save</button>
    </div>
</ng-template>
<ng-template #nsfModal>
    <div class="modal-header">
        <h4 class="modal-title pull-left">NSF Details for deposit no. {{formDetails.deposit_no}}</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form autocomplete="off">
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-sm-12 coltrol-label mt-1 mb-0">
                            Payment Amount:
                            <b>{{formDetails.payment_amount | currency:'USD'}}</b>
                        </label>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-sm-12 coltrol-label mt-1 mb-0">
                            Payment Date:
                            <b>{{formDetails.payment_date | date:'yyyy-MM-dd'}}</b>
                        </label>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-sm-12 coltrol-label mt-1 mb-0">Interest:</label>
                        <div class="col-sm-12">
                            <input type="number" min="0" [ngModelOptions]="{standalone: true}" name="interest" [(ngModel)]="formDetails.interest" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-sm-12 coltrol-label mt-1 mb-0">Penalty:</label>
                        <div class="col-sm-12">
                            <input type="number" min="0" [ngModelOptions]="{standalone: true}" name="penalty" [(ngModel)]="formDetails.penalty" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-sm-12 coltrol-label mt-1 mb-0">NSF Fee:</label>
                        <div class="col-sm-12">
                            <input type="number" min="0" [ngModelOptions]="{standalone: true}" name="nsf_fee" [(ngModel)]="formDetails.nsf_fee" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="form-group row">
                        <label class="col-sm-12 coltrol-label mt-1 mb-0">Notes</label>
                        <div class="col-sm-12">
                            <textarea type="text" cols="5" rows="7" [ngModelOptions]="{standalone: true}" name="notes" [(ngModel)]="formDetails.notes" class="form-control"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Close</button>
        <button type="button" class="btn btn-primary" (click)="updateNSFPayment()">Save</button>
    </div>
</ng-template>
<ng-template #receivePaymentModal>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Receive Payment</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form autocomplete="off">
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 coltrol-label mt-1 mb-0">Project Name :
                            <b> {{formDetails?.unit?.project_name}}</b>
                        </label>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 coltrol-label mt-1 mb-0">Unit :
                            <b> {{formDetails?.unit?.unit_no}}</b>
                        </label>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-sm-12 coltrol-label mt-1 mb-0">Deposit
                            <span style="color:red">*</span>
                            :</label>
                        <div class="col-sm-12">
                            <select class="form-select" (change)="onEditDepositChange()" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.deposit_id" id="deposit">
                                <option value="">Select Deposit</option>
                                <option *ngFor="let item of depositedList;let j=index" value={{item._id}}>Deposit {{j+1}}</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-sm-12 coltrol-label mt-1 mb-0">Payment Amount
                            <span style="color:red">*</span>:</label>
                        <div class="col-sm-12">
                            <input type="number" min="0" [ngModelOptions]="{standalone: true}" name="payment_amount" [(ngModel)]="formDetails.payment_amount" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-sm-12 coltrol-label mt-1 mb-0">Payment Date
                            <span style="color:red">*</span>:</label>
                        <div class="input-group col-sm-12">
                            <input type="text" class="form-control" placeholder="YYYY-MM-DD" #paymentDate="bsDatepicker" bsDatepicker [bsConfig]="{ containerClass: 'theme-dark-blue',showTodayButton: true, todayPosition: 'center',showClearButton: true, clearPosition: 'right',isAnimated: true,adaptivePosition: true,dateInputFormat: 'YYYY-MM-DD',  returnFocusToInput: true }"
                                [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.payment_date">
                            <span class=" input-group-prepend" (click)="paymentDate.toggle()" [attr.aria-expanded]="paymentDate.isOpen">
                                <span class="input-group-text">
                                    <i class="fa fa-calendar"></i>
                                </span>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-sm-12 coltrol-label mt-1 mb-0">Payment Type
                            <span style="color:red">*</span>:</label>
                        <div class="col-sm-12">
                            <select class="form-select" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.payment_type" id="projectId">
                                <option value="">Select Payment Type</option>
                                <option *ngFor="let item of paymemtTypes" value={{item.value}}>{{item.name}}</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="col-md-6" *ngIf="formDetails.payment_type=='CHEQUE' || formDetails.payment_type=='WIRE TRANSFER'">
                    <div class="form-group row">
                        <label class="col-sm-12 coltrol-label mt-1 mb-0">Financial Institution:</label>
                        <div class="col-sm-12">
                            <input type="text" [ngModelOptions]="{standalone: true}" name="financial_institution" [(ngModel)]="formDetails.financial_institution" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-6" *ngIf="formDetails.payment_type=='CHEQUE' || formDetails.payment_type=='WIRE TRANSFER'">
                    <div class="form-group row">
                        <label class="col-sm-12 coltrol-label mt-1 mb-0">Account Holder Name:</label>
                        <div class="col-sm-12">
                            <input type="text" [ngModelOptions]="{standalone: true}" name="account_holder_name" [(ngModel)]="formDetails.account_holder_name" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-6" *ngIf="formDetails.payment_type=='CHEQUE' || formDetails.payment_type=='WIRE TRANSFER'">
                    <div class="form-group row">
                        <label class="col-sm-12 coltrol-label mt-1 mb-0">Account:</label>
                        <div class="col-sm-12">
                            <input type="text" [ngModelOptions]="{standalone: true}" name="account" [(ngModel)]="formDetails.account" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-6" *ngIf="formDetails.payment_type=='CREDIT CARD'">
                    <div class="form-group row">
                        <label class="col-sm-12 coltrol-label mt-1 mb-0">Last 4 Digits:</label>
                        <div class="col-sm-12">
                            <input type="text" [ngModelOptions]="{standalone: true}" name="last_digits" [(ngModel)]="formDetails.last_digits" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="form-group row">
                        <label class="col-sm-12 coltrol-label mt-1 mb-0">Notes</label>
                        <div class="col-sm-12">
                            <textarea type="text" cols="5" rows="7" [ngModelOptions]="{standalone: true}" name="notes" [(ngModel)]="formDetails.notes" class="form-control"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Close</button>
        <button type="button" class="btn btn-primary" (click)="receivedPayment()">Save</button>
    </div>
</ng-template>
<ng-template #updateSolicitorDetails>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Edit Solicitor</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form autocomplete="off">
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Prefix:</label>
                        <div class="col-sm-12">
                            <input type="text" [ngModelOptions]="{standalone: true}" name="prefix" [(ngModel)]="formDetails.prefix" class="form-control">
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">First Name
                            <span style="color:red">*</span>:</label>
                        <div class="col-sm-12">
                            <input type="text" [ngModelOptions]="{standalone: true}" name="first_name" [(ngModel)]="formDetails.first_name" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Middle Name :</label>
                        <div class="col-sm-12">
                            <input type="text" [ngModelOptions]="{standalone: true}" name="middle_name" [(ngModel)]="formDetails.middle_name" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Last Name
                            <span style="color:red">*</span>:</label>
                        <div class="col-sm-12">
                            <input type="text" [ngModelOptions]="{standalone: true}" name="last_name" [(ngModel)]="formDetails.last_name" class="form-control">
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Suffix:</label>
                        <div class="col-sm-12">
                            <input type="text" [ngModelOptions]="{standalone: true}" name="suffix" [(ngModel)]="formDetails.suffix" class="form-control">
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Display Name :
                        </label>
                        <div class="col-sm-12">
                            <input type="text" [ngModelOptions]="{standalone: true}" name="display_name" [(ngModel)]="formDetails.display_name" class="form-control">
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Salutation:</label>
                        <div class="col-sm-12">
                            <input type="text" [ngModelOptions]="{standalone: true}" name="salutation" [(ngModel)]="formDetails.salutation" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Family Salutation:</label>
                        <div class="col-sm-12">
                            <input type="text" [ngModelOptions]="{standalone: true}" name="family_salutation" [(ngModel)]="formDetails.family_salutation" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Street1:</label>
                        <div class="col-sm-12">
                            <input type="text" name="street1" [(ngModel)]="formDetails.addresses.street1" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Street2:</label>
                        <div class="col-sm-12">
                            <input type="text" name="street2" [(ngModel)]="formDetails.addresses.street2" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Street3:</label>
                        <div class="col-sm-12">
                            <input type="text" name="street3" [(ngModel)]="formDetails.addresses.street3" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Zip :
                        </label>
                        <div class="col-sm-12">
                            <input type="text" name="zip" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.addresses.zip" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Country :
                        </label>
                        <div class="col-sm-12">
                            <input type="text" name="country" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.addresses.country" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Province/State :
                        </label>
                        <div class="col-sm-12">
                            <input type="text" name="state" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.addresses.state" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">City :
                        </label>
                        <div class="col-sm-12">
                            <input type="text" name="city" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.addresses.city" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Home Phone :</label>
                        <div class="col-sm-12">
                            <form #f="ngForm" [formGroup]="homePhone">
                                <ngx-intl-tel-input [cssClass]="'custom'" [preferredCountries]="preferredCountries" [enableAutoCountrySelect]="true" [enablePlaceholder]="true" [searchCountryFlag]="true" [searchCountryField]="[SearchCountryField.Iso2, SearchCountryField.Name]" [selectFirstCountry]="false"
                                    [selectedCountryISO]="CountryISO.Canada" [maxLength]="15" [phoneValidation]="true" [separateDialCode]="separateDialCode" name="home" formControlName="home_phone">
                                </ngx-intl-tel-input>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Support Phone :</label>
                        <div class="col-sm-12">
                            <form #f="ngForm" [formGroup]="supportPhone">
                                <ngx-intl-tel-input [cssClass]="'custom'" [preferredCountries]="preferredCountries" [enableAutoCountrySelect]="true" [enablePlaceholder]="true" [searchCountryFlag]="true" [searchCountryField]="[SearchCountryField.Iso2, SearchCountryField.Name]" [selectFirstCountry]="false"
                                    [selectedCountryISO]="CountryISO.Canada" [maxLength]="15" [phoneValidation]="true" [separateDialCode]="separateDialCode" name="home" formControlName="support_phone">
                                </ngx-intl-tel-input>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Mobile Phone :</label>
                        <div class="col-sm-12">
                            <form #f="ngForm" [formGroup]="mobilePhone">
                                <ngx-intl-tel-input [cssClass]="'custom'" [preferredCountries]="preferredCountries" [enableAutoCountrySelect]="true" [enablePlaceholder]="true" [searchCountryFlag]="true" [searchCountryField]="[SearchCountryField.Iso2, SearchCountryField.Name]" [selectFirstCountry]="false"
                                    [selectedCountryISO]="CountryISO.Canada" [maxLength]="15" [phoneValidation]="true" [separateDialCode]="separateDialCode" name="mobile" formControlName="mobile_phone">
                                </ngx-intl-tel-input>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Work Phone :</label>
                        <div class="col-sm-12">
                            <form #f="ngForm" [formGroup]="workPhone">
                                <ngx-intl-tel-input [cssClass]="'custom'" [preferredCountries]="preferredCountries" [enableAutoCountrySelect]="true" [enablePlaceholder]="true" [searchCountryFlag]="true" [searchCountryField]="[SearchCountryField.Iso2, SearchCountryField.Name]" [selectFirstCountry]="false"
                                    [selectedCountryISO]="CountryISO.Canada" [maxLength]="15" [phoneValidation]="true" [separateDialCode]="separateDialCode" name="work" formControlName="work_phone">
                                </ngx-intl-tel-input>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label"> Personal Email :
                        </label>
                        <div class="col-sm-12">
                            <input type="email" name="email" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.personal_email" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label"> Work Email :
                        </label>
                        <div class="col-sm-12">
                            <input type="email" name="email" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.work_email" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Fax :
                        </label>
                        <div class="col-sm-12">
                            <input type="text" name="fax" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.fax" class="form-control">
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">

        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Close</button>
        <button type="button" class="btn btn-primary" (click)="updateSolicitor()">Save</button>
        <button type="button" *ngIf="dealDetailsObj?.solicitor && dealDetailsObj?.solicitor?._id" class="btn btn-danger" (click)="removeSolicitor()">Remove</button>
    </div>
</ng-template>
<ng-template #updateConstructionDetails>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Edit Construction</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form autocomplete="off">
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">First Tentative Occupancy :</label>
                        <div class="col-sm-12">
                            <div class="input-group">
                                <input type="text" class="form-control" #firstTentativeOccupancy="bsDatepicker" bsDatepicker [bsConfig]="{ containerClass: 'theme-dark-blue',showTodayButton: true, todayPosition: 'center',showClearButton: true, clearPosition: 'right',isAnimated: true,adaptivePosition: true,dateInputFormat: 'YYYY-MM-DD' }"
                                    [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.first_tentative_occupancy" placeholder="YYYY-MM-DD">
                                <span class=" input-group-prepend" (click)="firstTentativeOccupancy.toggle()" [attr.aria-expanded]="firstTentativeOccupancy.isOpen">
                                    <span class="input-group-text">
                                        <i class="fa fa-calendar"></i>
                                    </span>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Outside Occupancy :</label>
                        <div class="col-sm-12">
                            <div class="input-group">
                                <input type="text" class="form-control" #outsideOccupancy="bsDatepicker" bsDatepicker [bsConfig]="{ containerClass: 'theme-dark-blue',showTodayButton: true, todayPosition: 'center',showClearButton: true, clearPosition: 'right',isAnimated: true,adaptivePosition: true,dateInputFormat: 'YYYY-MM-DD' }"
                                    [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.outside_occupancy" placeholder="YYYY-MM-DD">
                                <span class=" input-group-prepend" (click)="outsideOccupancy.toggle()" [attr.aria-expanded]="outsideOccupancy.isOpen">
                                    <span class="input-group-text">
                                        <i class="fa fa-calendar"></i>
                                    </span>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Notice Period for Occupancy Delay : </label>
                        <div class="col-sm-12">
                            <input type="number" min="0" [ngModelOptions]="{standalone: true}" name="notice_period_occupancy_delay" [(ngModel)]="formDetails.notice_period_occupancy_delay" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Purchasers Termination Period:
                        </label>
                        <div class="col-sm-12">
                            <input type="number" min="0" [ngModelOptions]="{standalone: true}" name="purchaser_termination_period" [(ngModel)]="formDetails.purchaser_termination_period" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Zoning Approval :
                        </label>
                        <div class="col-sm-12">
                            <input type="text" [ngModelOptions]="{standalone: true}" name="zoning_approval" [(ngModel)]="formDetails.zoning_approval" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Commencement of Construction has Occurred :
                        </label>
                        <div class="col-sm-12">
                            <div class="input-group">
                                <input type="text" class="form-control" #ConstructionOccurred="bsDatepicker" bsDatepicker [bsConfig]="{ containerClass: 'theme-dark-blue',showTodayButton: true, todayPosition: 'center',showClearButton: true, clearPosition: 'right',isAnimated: true,adaptivePosition: true,dateInputFormat: 'YYYY-MM-DD' }"
                                    [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.commencement_construction_occurred" placeholder="YYYY-MM-DD">
                                <span class=" input-group-prepend" (click)="ConstructionOccurred.toggle()" [attr.aria-expanded]="ConstructionOccurred.isOpen">
                                    <span class="input-group-text">
                                        <i class="fa fa-calendar"></i>
                                    </span>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Commencement expected to Occur by :
                        </label>
                        <div class="col-sm-12">
                            <input type="text" [ngModelOptions]="{standalone: true}" name="commencement_expected_occur_by" [(ngModel)]="formDetails.commencement_expected_occur_by" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Early Termination Condition #1 :
                        </label>
                        <div class="col-sm-12">
                            <input type="text" [ngModelOptions]="{standalone: true}" name="early_termination_condition_1" [(ngModel)]="formDetails.early_termination_condition_1" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Early Termination Condition #2 :
                        </label>
                        <div class="col-sm-12">
                            <input type="text" [ngModelOptions]="{standalone: true}" name="early_termination_condition_2" [(ngModel)]="formDetails.early_termination_condition_2" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Early Termination Condition #3 :
                        </label>
                        <div class="col-sm-12">
                            <input type="text" [ngModelOptions]="{standalone: true}" name="early_termination_condition_3" [(ngModel)]="formDetails.early_termination_condition_3" class="form-control">
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Close</button>
        <button type="button" class="btn btn-primary" (click)="updateConstruction()">Save</button>
    </div>
</ng-template>
<ng-template #updateThirdPartyDetails>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Edit Third Party</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form autocomplete="off">
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">First Name
                            <span style="color:red">*</span>:</label>
                        <div class="col-sm-12">
                            <input type="text" [ngModelOptions]="{standalone: true}" name="first_name" [(ngModel)]="formDetails.first_name" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Middle Name :</label>
                        <div class="col-sm-12">
                            <input type="text" [ngModelOptions]="{standalone: true}" name="middle_name" [(ngModel)]="formDetails.middle_name" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Last Name
                            <span style="color:red">*</span>:</label>
                        <div class="col-sm-12">
                            <input type="text" [ngModelOptions]="{standalone: true}" name="last_name" [(ngModel)]="formDetails.last_name" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Display Name :
                        </label>
                        <div class="col-sm-12">
                            <input type="text" [ngModelOptions]="{standalone: true}" name="display_name" [(ngModel)]="formDetails.display_name" class="form-control">
                        </div>
                    </div>
                </div>
                <!-- <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Date of Birth :</label>
                        <div class="col-sm-12">
                            <div class="input-group">
                                <input type="text" class="form-control" #start="bsDatepicker" bsDatepicker [bsConfig]="{ containerClass: 'theme-dark-blue',showTodayButton: true, todayPosition: 'center',showClearButton: true, clearPosition: 'right',isAnimated: true,adaptivePosition: true,dateInputFormat: 'YYYY-MM-DD' }"
                                    [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.dob" placeholder="YYYY-MM-DD">
                                <span class=" input-group-prepend" (click)="start.toggle()" [attr.aria-expanded]="start.isOpen">
                                    <span class="input-group-text">
                                        <i class="fa fa-calendar"></i>
                                    </span>
                                </span>
                            </div>
                        </div>
                    </div>
                </div> -->
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Street1:</label>
                        <div class="col-sm-12">
                            <input type="text" name="street1" [(ngModel)]="formDetails.addresses.street1" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Street2:</label>
                        <div class="col-sm-12">
                            <input type="text" name="street2" [(ngModel)]="formDetails.addresses.street2" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Street3:</label>
                        <div class="col-sm-12">
                            <input type="text" name="street3" [(ngModel)]="formDetails.addresses.street3" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Zip :
                        </label>
                        <div class="col-sm-12">
                            <input type="text" name="zip" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.addresses.zip" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Country :
                        </label>
                        <div class="col-sm-12">
                            <input type="text" name="country" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.addresses.country" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Province/State :
                        </label>
                        <div class="col-sm-12">
                            <input type="text" name="state" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.addresses.state" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">City :
                        </label>
                        <div class="col-sm-12">
                            <input type="text" name="city" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.addresses.city" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Home Phone :</label>
                        <div class="col-sm-12">
                            <form #f="ngForm" [formGroup]="homePhone">
                                <ngx-intl-tel-input [cssClass]="'custom'" [preferredCountries]="preferredCountries" [enableAutoCountrySelect]="true" [enablePlaceholder]="true" [searchCountryFlag]="true" [searchCountryField]="[SearchCountryField.Iso2, SearchCountryField.Name]" [selectFirstCountry]="false"
                                    [selectedCountryISO]="CountryISO.Canada" [maxLength]="15" [phoneValidation]="true" [separateDialCode]="separateDialCode" name="home" formControlName="home_phone">
                                </ngx-intl-tel-input>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Support Phone :</label>
                        <div class="col-sm-12">
                            <form #f="ngForm" [formGroup]="supportPhone">
                                <ngx-intl-tel-input [cssClass]="'custom'" [preferredCountries]="preferredCountries" [enableAutoCountrySelect]="true" [enablePlaceholder]="true" [searchCountryFlag]="true" [searchCountryField]="[SearchCountryField.Iso2, SearchCountryField.Name]" [selectFirstCountry]="false"
                                    [selectedCountryISO]="CountryISO.Canada" [maxLength]="15" [phoneValidation]="true" [separateDialCode]="separateDialCode" name="home" formControlName="support_phone">
                                </ngx-intl-tel-input>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Mobile Phone :</label>
                        <div class="col-sm-12">
                            <form #f="ngForm" [formGroup]="mobilePhone">
                                <ngx-intl-tel-input [cssClass]="'custom'" [preferredCountries]="preferredCountries" [enableAutoCountrySelect]="true" [enablePlaceholder]="true" [searchCountryFlag]="true" [searchCountryField]="[SearchCountryField.Iso2, SearchCountryField.Name]" [selectFirstCountry]="false"
                                    [selectedCountryISO]="CountryISO.Canada" [maxLength]="15" [phoneValidation]="true" [separateDialCode]="separateDialCode" name="mobile" formControlName="mobile_phone">
                                </ngx-intl-tel-input>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Work Phone :</label>
                        <div class="col-sm-12">
                            <form #f="ngForm" [formGroup]="workPhone">
                                <ngx-intl-tel-input [cssClass]="'custom'" [preferredCountries]="preferredCountries" [enableAutoCountrySelect]="true" [enablePlaceholder]="true" [searchCountryFlag]="true" [searchCountryField]="[SearchCountryField.Iso2, SearchCountryField.Name]" [selectFirstCountry]="false"
                                    [selectedCountryISO]="CountryISO.Canada" [maxLength]="15" [phoneValidation]="true" [separateDialCode]="separateDialCode" name="work" formControlName="work_phone">
                                </ngx-intl-tel-input>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label"> Personal Email :
                        </label>
                        <div class="col-sm-12">
                            <input type="email" name="email" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.personal_email" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label"> Work Email :
                        </label>
                        <div class="col-sm-12">
                            <input type="email" name="email" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.work_email" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Fax :
                        </label>
                        <div class="col-sm-12">
                            <input type="text" name="fax" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.fax" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Nature of Principal Business or Occupation or POA :</label>
                        <div class="col-sm-12">
                            <input type="text" name="city" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.poa" class="form-control">
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Close</button>
        <button type="button" class="btn btn-primary" (click)="updateThirdParty()">Save</button>
    </div>
</ng-template>
<ng-template #updateMortgage>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Edit Third Party</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form autocomplete="off">
            <div class="row">
                <div class="col-md-6">
                    <div class="custom-control custom-checkbox mt-4">
                        <input class="custom-control-input" type="checkbox" value="" id="required" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.required">
                        <label class="custom-control-label pl-2" for="required">
                            Is required
                        </label>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Required Amount:</label>
                        <div class="col-sm-12">
                            <input type="number" min="0" [ngModelOptions]="{standalone: true}" name="required_amount" [(ngModel)]="formDetails.required_amount" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Required Date :</label>
                        <div class="col-sm-12">
                            <div class="input-group">
                                <input type="text" class="form-control" #RequiredDate="bsDatepicker" bsDatepicker [bsConfig]="{ containerClass: 'theme-dark-blue',showTodayButton: true, todayPosition: 'center',showClearButton: true, clearPosition: 'right',isAnimated: true,adaptivePosition: true,dateInputFormat: 'YYYY-MM-DD' }"
                                    [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.required_by_date" placeholder="YYYY-MM-DD">
                                <span class=" input-group-prepend" (click)="RequiredDate.toggle()" [attr.aria-expanded]="RequiredDate.isOpen">
                                    <span class="input-group-text">
                                        <i class="fa fa-calendar"></i>
                                    </span>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Approval Amount:</label>
                        <div class="col-sm-12">
                            <input type="number" min="0" name="approval_amount" [(ngModel)]="formDetails.approval_amount" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Lender :</label>
                        <div class="col-sm-12">
                            <input type="text" name="lender" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.lender" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Coverage Percent :</label>
                        <div class="col-sm-12">
                            <input type="number" min="0" name="coverage_percent" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.coverage_percent" class="form-control">
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Close</button>
        <button type="button" class="btn btn-primary" (click)="updateMortgageDetails()">Save</button>
    </div>
</ng-template>
<ng-template #updateBrokerDetails>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Edit Broker</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form autocomplete="off">
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Broker Name :</label>
                        <div class="col-sm-12">
                            <input type="text" [ngModelOptions]="{standalone: true}" name="broker_name" [(ngModel)]="formDetails.broker_name" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Email:</label>
                        <div class="col-sm-12">
                            <input type="email" [ngModelOptions]="{standalone: true}" name="email" [(ngModel)]="formDetails.email" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Phone :</label>
                        <div class="col-sm-12">
                            <form #f="ngForm" [formGroup]="brokerPhone">
                                <ngx-intl-tel-input [cssClass]="'custom'" [preferredCountries]="preferredCountries" [enableAutoCountrySelect]="true" [enablePlaceholder]="true" [searchCountryFlag]="true" [searchCountryField]="[SearchCountryField.Iso2, SearchCountryField.Name]" [selectFirstCountry]="false"
                                    [selectedCountryISO]="CountryISO.Canada" [maxLength]="15" [phoneValidation]="true" [separateDialCode]="separateDialCode" name="home" formControlName="phone">
                                </ngx-intl-tel-input>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Close</button>
        <button type="button" class="btn btn-primary" (click)="updateBrokerDetail()">Save</button>
    </div>
</ng-template>
<ng-template #updateSalesAgentDetails>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Edit Sales Agent</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form autocomplete="off">
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Sales Agent Name :</label>
                        <div class="col-sm-12">
                            <input type="text" [ngModelOptions]="{standalone: true}" name="sales_agent_name" [(ngModel)]="formDetails.sales_agent_name" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Email:</label>
                        <div class="col-sm-12">
                            <input type="email" [ngModelOptions]="{standalone: true}" name="email" [(ngModel)]="formDetails.email" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Phone :</label>
                        <div class="col-sm-12">
                            <form #f="ngForm" [formGroup]="brokerPhone">
                                <ngx-intl-tel-input [cssClass]="'custom'" [preferredCountries]="preferredCountries" [enableAutoCountrySelect]="true" [enablePlaceholder]="true" [searchCountryFlag]="true" [searchCountryField]="[SearchCountryField.Iso2, SearchCountryField.Name]" [selectFirstCountry]="false"
                                    [selectedCountryISO]="CountryISO.Canada" [maxLength]="15" [phoneValidation]="true" [separateDialCode]="separateDialCode" name="home" formControlName="phone">
                                </ngx-intl-tel-input>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Close</button>
        <button type="button" class="btn btn-primary" (click)="updateSalesAgentDetail()">Save</button>
    </div>
</ng-template>
<ng-template #openChequeDocument>
    <div class="modal-header">
        <h4 class="modal-title pull-left"> View Cheque Document </h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body custom-body">
        <div class="container-fluid">
            <div class="pdf-container" *ngIf="formDetails?.file_type=='pdf'">
                <pdf-viewer [src]="formDetails?.thumbnailUrl" [original-size]="false"></pdf-viewer>
            </div>
            <div class="row" *ngIf="formDetails?.file_type=='png' || formDetails?.file_type=='jpg' || formDetails?.file_type=='jpeg'">
                <img style="max-width:100%" src="{{formDetails?.thumbnailUrl}}" alt="{{formDetails?.name}}">
                <div *ngIf="!formDetails?.thumbnailUrl">
                    Image is not available
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <div class="col-md-12">
            <div class="col-md-12 ">
                <!-- <button type="button" style="float:left" class="btn btn-danger" (click)="deleteFeatureDocument(selectedDocument)">Delete</button> -->
                <button type="button" style="float:right" class="btn btn-secondary" (click)="modalRef.hide()">Cancel</button>
            </div>
        </div>
    </div>
</ng-template>
<ng-template #applyDiscount>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Apply incentives</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form autocomplete="off">
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group row">
                        <label class="col-md-12 col-form-label">Select an Incentive
                            <span style="color:red">*</span>:</label>
                        <div class="col-sm-12">
                            <select class="form-select" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.discount" id="projectId">
                                <option value="">Select Incentive</option>
                                <option *ngFor="let item of discountList" value={{item._id}}>{{item.name}}</option>
                            </select>
                        </div>
                    </div>
                </div>
                <ng-container *ngIf="formDetails.discount">
                    <div class="col-md-12">
                        <dl class="row mb-0" *ngFor="let discount of discountList">
                            <ng-container *ngIf="formDetails.discount == discount._id">
                                <h6>Incentive Details</h6>
                                <dd class="col-md-5">Project Name</dd>
                                <dd class="col-md-7">: {{discount?.project_name}}</dd>
                                <dd class="col-md-5">Type of incentive</dd>
                                <dd class="col-md-7" *ngIf="discount.type_of_incentive=='MONETARY'">: Monetary Value as discounted price
                                </dd>
                                <dd class="col-md-7" *ngIf="discount.type_of_incentive=='DECORE-DOLLAR'">: Decore Dollar </dd>
                                <dd class="col-md-7" *ngIf="discount.type_of_incentive=='UPGRADE-PACKAGE-FREE'">: Specific upgrade package free</dd>
                                <dd class="col-md-5" *ngIf="discount.type_of_incentive=='UPGRADE-PACKAGE-FREE' && discount.package_name">Package Name </dd>
                                <dd class="col-md-7" *ngIf="discount.type_of_incentive=='UPGRADE-PACKAGE-FREE' && discount.package_name">: {{discount?.package_name}}</dd>
                                <ng-container>
                                    <dd class="col-md-5">Amount Type</dd>
                                    <dd class="col-md-7">: {{discount?.amount_type =='AMOUNT' ? 'Fixed Amount' : 'Percentage of Unit Sale Price'}}</dd>
                                    <dd class="col-md-5" *ngIf="discount?.amount_type =='PERCENT'">Percent</dd>
                                    <dd class="col-md-7" *ngIf="discount?.amount_type =='PERCENT'">: {{discount?.percent ? discount?.percent +'%' :''}}</dd>
                                    <dd class="col-md-5" *ngIf="discount?.amount_type =='PERCENT'">Amount</dd>
                                    <dd class="col-md-7" *ngIf="discount?.amount_type =='PERCENT'">: {{discount?.amount ? ( discount?.amount | currency:'USD') :''}}</dd>
                                    <dd class="col-md-5" *ngIf="discount?.amount_type =='AMOUNT'">Amount </dd>
                                    <dd class="col-md-7" *ngIf="discount?.amount_type =='AMOUNT'">: {{discount?.amount ? ( discount?.amount | currency:'USD') :''}}</dd>
                                </ng-container>
                                <dd class="col-md-5">Description</dd>
                                <dd class="col-md-7">:
                                    <div [innerHTML]="discount?.description ? discount?.description :''"></div>
                                </dd>
                                <dd class="col-md-5">Start Date</dd>
                                <dd class="col-md-7">: {{discount?.start | date:'yyyy-MM-dd' }}</dd>
                                <dd class="col-md-5">End Date</dd>
                                <dd class="col-md-7">: {{discount?.end | date:'yyyy-MM-dd' }}</dd>
                            </ng-container>
                        </dl>
                    </div>
                </ng-container>
                <div class="col-md-12">
                    <div class="form-group row">
                        <label class="col-sm-12 col-form-label">Comment:
                        </label>
                        <div class="col-sm-12">
                            <textarea class="form-control" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.comment" name="coment" id="comment" cols="55" rows="12">
                                </textarea>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Close</button>
        <button type="button" class="btn btn-primary" (click)="onApplyDeposit()">Apply incentives</button>
    </div>
</ng-template>
<ng-template #allocateParkingModal>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Allocate Parking(Sell Parking) </h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="container-fluid">
            <form autocomplete="off">
                <div *ngIf="parkingTypes.length>0">
                    <div class="row mb-2" *ngIf="dealDetailsObj?.max_parking">
                        <div class="col-md-5">
                            Eligible Parking :
                            <b>{{dealDetailsObj?.is_parking_eligible ? 'Yes' : 'No'}}</b>
                        </div>
                        <div class="col-md-7 text-right">Max number of parking spaces:
                            <b>{{dealDetailsObj?.max_parking}}</b>
                        </div>
                    </div>
                    <table class="table table-striped table-sm list_table table-header-fixed" style="table-layout: fixed;">
                        <thead>
                            <tr>
                                <th>Type </th>
                                <th>Number</th>
                                <th>Price</th>
                            </tr>
                        </thead>
                        <tbody>
                            <ng-container *ngFor="let item of parkingTypes; let i =index">
                                <tr>
                                    <td>{{item?.name}}</td>
                                    <td>
                                        <input type="number" id="number{{i}}" min="0" step="1" class="form-control" [ngModelOptions]="{standalone: true}" [(ngModel)]="item.number">
                                    </td>
                                    <td>
                                        <input type="number" id="price{{i}}" min="0" step="1" class="form-control" [ngModelOptions]="{standalone: true}" [(ngModel)]="item.price">
                                    </td>
                                </tr>
                            </ng-container>
                        </tbody>
                    </table>
                </div>
                <div class="mb-5" *ngIf="parkingTypes.length==0">
                    <p class="text-center"> No Parking Type</p>
                </div>
            </form>
        </div>
    </div>
    <div class="modal-footer">
        <div class="col-md-12 text-right">
            <button type="button" class="btn btn-secondary mr-2" (click)="modalRef.hide()">Cancel</button>
            <button type="button" class="btn btn-primary" (click)="allocateParking()">Update</button>
        </div>
    </div>
</ng-template>
<ng-template #allocateBicycleModal>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Allocate Bicycle(Sell Bicycle)</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="container-fluid">
            <form autocomplete="off">
                <div *ngIf="bicycleTypes.length>0">
                    <div class="row mb-2" *ngIf="dealDetailsObj?.max_bicycle">
                        <div class="col-md-5">
                            Eligible Bicycle :
                            <b>{{dealDetailsObj?.is_bicycle_eligible ? 'Yes' : 'No'}}</b>
                        </div>
                        <div class="col-md-7 text-right"> Max number of parking spaces:
                            <b>{{dealDetailsObj?.max_bicycle}}</b>
                        </div>
                    </div>
                    <table class="table table-striped table-sm list_table table-header-fixed" style="table-layout: fixed;">
                        <thead>
                            <tr>
                                <th>Type </th>
                                <th>Number</th>
                                <th>Price</th>
                            </tr>
                        </thead>
                        <tbody>
                            <ng-container *ngFor="let item of bicycleTypes; let i =index">
                                <tr>
                                    <td>{{item?.name}}</td>
                                    <td>
                                        <input type="number" id="number{{i}}" min="0" step="1" class="form-control" [ngModelOptions]="{standalone: true}" [(ngModel)]="item.number">
                                    </td>
                                    <td>
                                        <input type="number" id="price{{i}}" min="0" step="1" class="form-control" [ngModelOptions]="{standalone: true}" [(ngModel)]="item.price">
                                    </td>
                                </tr>
                            </ng-container>
                        </tbody>
                    </table>
                </div>
                <div class="mb-5" *ngIf="bicycleTypes.length==0">
                    <p class="text-center"> No Bicycle Type</p>
                </div>
            </form>
        </div>
    </div>
    <div class="modal-footer">
        <div class="col-md-12 text-right">
            <button type="button" class="btn btn-secondary mr-2" (click)="modalRef.hide()">Cancel</button>
            <button type="button" class="btn btn-primary" (click)="allocateBicycle()">Update</button>
        </div>
    </div>
</ng-template>
<ng-template #allocateLockerModal>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Allocate Locker(Sell Locker)</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="container-fluid">
            <form autocomplete="off">
                <div *ngIf="lockerTypes.length>0">
                    <div class="row mb-2" *ngIf="dealDetailsObj?.max_lockers">
                        <div class="col-md-5">
                            Eligible Locker :
                            <b>{{dealDetailsObj?.is_locker_eligible ? 'Yes' : 'No'}}</b>
                        </div>
                        <div class="col-md-7 text-right"> Max number of parking spaces:
                            <b>{{dealDetailsObj?.max_lockers}}</b>
                        </div>
                    </div>
                    <table class="table table-striped table-sm list_table table-header-fixed" style="table-layout: fixed;">
                        <thead>
                            <tr>
                                <th>Type </th>
                                <th>Number</th>
                                <th>Price</th>
                            </tr>
                        </thead>
                        <tbody>
                            <ng-container *ngFor="let item of lockerTypes; let i =index">
                                <tr>
                                    <td>{{item?.name}}</td>
                                    <td>
                                        <input type="number" id="number{{i}}" min="0" step="1" class="form-control" [ngModelOptions]="{standalone: true}" [(ngModel)]="item.number">
                                    </td>
                                    <td>
                                        <input type="number" id="price{{i}}" min="0" step="1" class="form-control" [ngModelOptions]="{standalone: true}" [(ngModel)]="item.price">
                                    </td>
                                </tr>
                            </ng-container>
                        </tbody>
                    </table>
                </div>
                <div class="mb-5" *ngIf="lockerTypes.length==0">
                    <p class="text-center"> No Locker Type</p>
                </div>
            </form>
        </div>
    </div>
    <div class="modal-footer">
        <div class="col-md-12 text-right">
            <button type="button" class="btn btn-secondary mr-2" (click)="modalRef.hide()">Cancel</button>
            <button type="button" class="btn btn-primary" (click)="allocateLocker()">Update</button>
        </div>
    </div>
</ng-template>
<ng-template #agreementOutModal>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Agreement Out for Sign</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form autocomplete="off">
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <label class="col-form-label"> Date :</label>
                        <div class="input-group">
                            <input type="text" class="form-control" placeholder="YYYY-MM-DD" #todayDate="bsDatepicker" bsDatepicker [bsConfig]="{ containerClass: 'theme-dark-blue',showTodayButton: true, todayPosition: 'center',showClearButton: true, clearPosition: 'right',isAnimated: true,adaptivePosition: true,dateInputFormat: 'YYYY-MM-DD',  returnFocusToInput: true }"
                                [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.note_date">
                            <span class=" input-group-prepend" (click)="todayDate.toggle()" [attr.aria-expanded]="todayDate.isOpen">
                                <span class="input-group-text">
                                    <i class="fa fa-calendar"></i>
                                </span>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="col-md-12">
                    <label class="col-form-label"> Notes :</label>
                    <textarea class="form-control" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.notes" name="coment" id="comment" cols="55" rows="12">
                    </textarea>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Cancel</button>
        <button type="button" class="btn btn-primary" (click)="updateAggrementOutSign()">Update</button>
    </div>
</ng-template>
<ng-template #openViewDocument>
    <div class="modal-header">
        <h4 class="modal-title pull-left">View Document</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="container-fluid">
            <form autocomplete="off">
                <div class="pdf-container" *ngIf="selectedDocument.file_type=='pdf'  ||selectedDocument?.file_type== 'docx'">
                    <pdf-viewer [src]="selectedDocument?.thumbnailUrl" [original-size]="false"></pdf-viewer>
                </div>
                <div class="row" *ngIf="selectedDocument?.file_type=='png' || selectedDocument?.file_type=='jpg' || selectedDocument?.file_type=='jpeg'">
                    <img style="max-width:100%" [src]="selectedDocument?.thumbnailUrl" alt="{{selectedDocument?.name}}">
                    <div *ngIf="!selectedDocument?.thumbnailUrl">
                        Image is not available
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="modal-footer">
        <div class="col-md-12 text-right">
            <button type="button" class="btn btn-secondary mr-2" (click)="modalRef.hide()">Cancel</button>
        </div>
    </div>
</ng-template>
<ng-template #openRenameDocument>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Rename Document</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="container-fluid">
            <form autocomplete="off">
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group row">
                            <label class="col-sm-12 col-form-label">Document Name :</label>
                            <div class="input-group col-sm-12">
                                <input type="text" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.name" class="form-control">
                                <div class="input-group-text">.{{formDetails.file_type}}</div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="modal-footer">
        <div class="col-md-12 text-right">
            <button type="button" class="btn btn-secondary mr-2" (click)="modalRef.hide()">Cancel</button>
            <button type="button" class="btn btn-primary" (click)="updateDocumentName()">Update</button>
        </div>
    </div>
</ng-template>
<ng-template #salesVerifyModal>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Sales Verification</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="container-fluid">
            <form autocomplete="off">
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group row">
                            <label class="col-md-12 ml-2 col-form-label">
                                All information on this deal is verified by Sales Team.
                            </label>
                            <div class="col-sm-12">
                                <!-- <div>
                                    <input [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.sales_verified" type="radio" value="true" id="verifysales" name="sales_verified">
                                    <label for="verifysales" class="mb-0">
                                        &nbsp;All information is verified and everything is in order. No issues found.
                                    </label>
                                </div> -->
                                <div class="form-check">
                                    <input class="form-check-input" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.sales_verified" type="checkbox" value="true" id="verifysales">
                                    <label class="form-check-label" for="verifysales">
                                        All information is verified and everything is in order. No issues found.
                                    </label>
                                </div>
                            </div>
                            <!-- <div class="col-sm-12">
                                <div>
                                    <input [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.sales_verified" type="radio" value="false" id="noverifysales" name="sales_verified">
                                    <label for="noverifysales" class="mb-0">
                                        &nbsp;Some information is missing or incorrect, Please review the deal.
                                    </label>
                                </div>
                                <div class="error" *ngIf="formDetails.sales_verified == 'false'">
                                    Please enter the issues found on the deal below in the Notes section
                                </div>
                            </div> -->
                        </div>
                    </div>
                    <div class="col-md-12">
                        <label class="col-form-label"> Notes :</label>
                        <textarea class="form-control" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.notes" name="coment" id="comment" cols="55" rows="12">
                            </textarea>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="modal-footer">
        <div class="col-md-12 text-right">
            <button type="button" class="btn btn-secondary mr-2" (click)="modalRef.hide()">Cancel</button>
            <button type="button" class="btn btn-primary" (click)="verifyBySales()">{{ formDetails.sales_verified ? 'Verify By Sales' :'Please review this Deal'}}</button>
        </div>
    </div>
</ng-template>
<ng-template #financeVerifyModal>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Finance Verification</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="container-fluid">
            <form autocomplete="off">
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group row">
                            <label class="col-md-12 col-form-label">
                                All information on this deal is verified by Finance Team.
                            </label>
                            <div class="col-sm-12">
                                <!-- <div>
                                    <input [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.finance_verified" type="radio" value="true" id="finance_verified" name="finance_verified">
                                    <label for="finance_verified" class="mb-0">
                                        &nbsp;All information is verified and everything is in order. No issues found.
                                    </label>
                                </div> -->
                                <div class="form-check">
                                    <input class="form-check-input" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.finance_verified" type="checkbox" value="true" id="finance_verified">
                                    <label class="form-check-label" for="finance_verified">
                                        All information is verified and everything is in order. No issues found.
                                    </label>
                                </div>
                            </div>
                            <!-- <div class="col-sm-12">
                                <div>
                                    <input [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.finance_verified" type="radio" value="false" id="noverifysales" name="finance_verified">
                                    <label for="noverifysales" class="mb-0">
                                        &nbsp;Some information is missing or incorrect, Please review the deal.
                                    </label>
                                </div>
                                <div class="error" *ngIf="formDetails.finance_verified == 'false' && !this.formDetails.notes">
                                    Please enter the issues found on the deal below in the Notes section
                                </div>
                            </div> -->
                        </div>
                    </div>
                    <div class="col-md-12">
                        <label class="col-form-label"> Notes :</label>
                        <textarea class="form-control" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.notes" name="coment" id="comment" cols="55" rows="12">
                                </textarea>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="modal-footer">
        <div class="col-md-12 text-right">
            <button type="button" class="btn btn-secondary mr-2" (click)="modalRef.hide()">Cancel</button>
            <button type="button" class="btn btn-primary" (click)="verifyByFinance()">{{ formDetails.finance_verified ? 'Verify By Finance' :'Please review this Deal'}}</button>
        </div>
    </div>
</ng-template>
<ng-template #noteModal>
    <div class="modal-header">
        <h4 class="modal-title pull-left">{{isNotesEdit ?'Edit' :'Add'}} Notes</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="container-fluid">
            <form autocomplete="off">
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            <label>Note : </label>
                            <textarea class="form-control" [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.body" name="coment" id="comment" cols="7" rows="7">
                        </textarea>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="modal-footer">
        <div class="col-md-12 text-right">
            <button type="button" class="btn btn-secondary mr-2" (click)="modalRef.hide()">Cancel</button>
            <button type="button" class="btn btn-primary" *ngIf="isNotesEdit" (click)="editNotes()">Update</button>
            <button type="button" class="btn btn-primary" *ngIf="!isNotesEdit" (click)="addNotes()">Add</button>
        </div>
    </div>
</ng-template>
<ng-template #executeAgreement>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Execute Agreement</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form autocomplete="off">
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <label class="col-form-label">Executed Date :</label>
                        <div class="input-group">
                            <input type="text" class="form-control" placeholder="YYYY-MM-DD" #executedDate="bsDatepicker" bsDatepicker [bsConfig]="{ containerClass: 'theme-dark-blue',showTodayButton: true, todayPosition: 'center',showClearButton: true, clearPosition: 'right',isAnimated: true,adaptivePosition: true,dateInputFormat: 'YYYY-MM-DD',  returnFocusToInput: true }"
                                [ngModelOptions]="{standalone: true}" [(ngModel)]="formDetails.executed_date">
                            <span class="pointer-events-none input-group-prepend" (click)="executedDate.toggle()" [attr.aria-expanded]="executedDate.isOpen">
                                <span class="input-group-text">
                                    <i class="fa fa-calendar"></i>
                                </span>
                            </span>
                        </div>
                    </div>
                </div>
                <!-- <div class="col-md-12">
                    <div class="form-group">
                        <label class="col-form-label">Number of extension Days: 
                            <b> {{formDetails.extension_days}} </b>
                        </label>
                    </div>
                </div> -->

                <div class="col-md-12">
                    <div class="form-group">
                        <label class="col-form-label">Default cooling period: 
                            <b> {{formDetails.default_cooling_period}} </b>
                        </label>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="form-group">
                        <label class="col-form-label">Extended cooling period: 
                            <b> {{formDetails.cooling_period_extended}} </b>
                        </label>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="form-group">
                        <label class="col-form-label"> Firm Date :
                            <b>{{formDetails.firm_date | date:'yyyy-MM-dd' }}</b>
                        </label>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef.hide()">Close</button>
        <button type="button" class="btn btn-primary" (click)="addExecuteAgreement()">Save</button>
    </div>
</ng-template>